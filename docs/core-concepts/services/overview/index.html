<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-core-concepts/services/overview">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Ziti Services | OpenZiti</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openziti.github.io/docs/core-concepts/services/overview"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ziti Services | OpenZiti"><meta data-rh="true" name="description" content="The primary strategy assumes that one function of Ziti is providing access to &quot;services&quot;. A service encapsulates the definition of any"><meta data-rh="true" property="og:description" content="The primary strategy assumes that one function of Ziti is providing access to &quot;services&quot;. A service encapsulates the definition of any"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openziti.github.io/docs/core-concepts/services/overview"><link data-rh="true" rel="alternate" href="https://openziti.github.io/docs/core-concepts/services/overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://openziti.github.io/docs/core-concepts/services/overview" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EYL355ZRV9-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenZiti RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenZiti Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="OpenZiti" href="/opensearch.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-THVRRJ3GLE","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.b00f0748.css">
<link rel="preload" href="/assets/js/runtime~main.df9d7b9c.js" as="script">
<link rel="preload" href="/assets/js/main.21755a42.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="root_VOM9"><span style="color:whitesmoke">Star us on GitHubÂ </span><span style="height:20px"><span><a href="https://github.com/openziti/ziti" data-icon="octicon-star" data-show-count="true" aria-label="Star buttons/github-buttons on GitHub">Star</a></span></span></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ziti-logo-dark.svg" alt="OpenZiti Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ziti-logo-light.svg" alt="OpenZiti Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction/intro">Docs</a><a class="navbar__item navbar__link" href="/api/">APIs</a><a class="navbar__item navbar__link" href="/guides/">Guides</a><a class="navbar__item navbar__link" href="/glossary/glossary">Glossary</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openziti/ziti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_eExm docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/introduction/intro">What is OpenZiti?</a><button aria-label="Toggle the collapsible sidebar category &#x27;What is OpenZiti?&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/quickstarts/network/">Quickstarts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quickstarts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/core-concepts/">Core Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core-concepts/clients/choose">Clients</a><button aria-label="Toggle the collapsible sidebar category &#x27;Clients&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core-concepts/identities/overview">Identities</a><button aria-label="Toggle the collapsible sidebar category &#x27;Identities&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/docs/core-concepts/services/overview">Services</a><button aria-label="Toggle the collapsible sidebar category &#x27;Services&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core-concepts/services/creating">Creating</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core-concepts/config-store/overview">Configuration Store</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuration Store&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core-concepts/metrics/">Metrics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Metrics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core-concepts/security/overview">Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/deployment-architecture/overview">Deploying OpenZiti</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deploying OpenZiti&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/manage/controller">Manage</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/core-concepts/"><span itemprop="name">Core Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Services</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Ziti Services</h1><p>The primary strategy assumes that one function of Ziti is providing access to &quot;services&quot;. A service encapsulates the definition of any
resource that could be accessed by a client on a traditional network. </p><p>A service is defined by the following components:</p><ul><li><strong>Name</strong> - the name of the service</li><li><strong>Termination</strong> - Ziti only provides access to a network service, it does not provide the service itself. The service must be able to get network traffic to whatever application or application cluster is actually providing the service, whether that provider has Ziti embedded or has no knowledge of Ziti</li><li><strong>Configuration</strong> - Ziti allows application specific configuration to be stored for services. See <a href="/docs/core-concepts/config-store/overview">Configuration Store</a></li><li><strong>Authorization</strong> - For a details on controlling access to services, see <a href="/docs/core-concepts/security/authorization/policies/overview">Policies</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-name">Service Name<a class="hash-link" href="#service-name" title="Direct link to heading">â</a></h2><p>Ziti services must have names that are unique to their Ziti installation. Service names are how clients address services in order to consume them. Services which are provided by applications with Ziti embedded also use the service name to indicate which service is being provided.</p><p>Services defined on a Ziti Network have an almost limitless &quot;namespace&quot; available for identifying services. A Ziti service is to be defined by a name and this name is registered with the Ziti Controller. Once declared, services can then be addressed directly by name from Ziti-aware clients. This means there are effecitvely a <strong>limitless</strong> number names available with no need for global DNS registration. The names assigned are unique to a Ziti Network and the application developer has total control over service names.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-termination">Service Termination<a class="hash-link" href="#service-termination" title="Direct link to heading">â</a></h2><p>In Ziti, service termination refers to how a network traffic going over Ziti reaches the application (or application cluster) which is actually providing a service. There are a few basic ways in which a service can be terminated at an application.</p><p>There are some trade-offs to consider for each type of termination. </p><ol><li>Do you want end-to-end zero trust? If yes, that requires that both the client and server have Ziti identities and can connect securely with provisioned certificates.</li><li>Do you want Ziti to provide end-to-end encryption? Developers can always provide their own end-to-end encryption on top of the connectivity that Ziti provides, but not all modes of service termination allow Ziti to encrypt traffic end-to-end for you.</li><li>How accessible to non-zero trust clients do you want your server application to be? With the proper configuration applications can be fully &#x27;dark&#x27;, meaning they do not listen for connections.  </li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sdk-embedded-applications">SDK Embedded Applications<a class="hash-link" href="#sdk-embedded-applications" title="Direct link to heading">â</a></h3><p>The server application can embed the Ziti Edge SDK. The application will have an enrolled identity and provisioned certificates. This has several advantages:</p><ol><li>Connections between the application and Ziti will be secured using certificates. This enables true zero trust and end-to-end encrypted connections betwen SDK based clients and SDK based servers. </li><li>With an identity, the server application can particpate in the Ziti security model. This means you can control which services the application can provide, and revoke access as needed. You can also control which edge routers the application may connect to.</li><li>The application will be &#x27;dark&#x27;. Instead of listening for incoming network connections, the application will make an outgoing, secured connection to one or more Ziti edge routers. It will then receive network requests over these secured connections.</li></ol><p>The downside to this approach, specifically for existing applications, is that the application must be refactored to use a Ziti Edge SDK. Depending on language and frameworks used, the effort required can range from updating a few lines of code to writing a new SDK from scratch for a language that&#x27;s not supported yet.   </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="proxied-applications">Proxied Applications<a class="hash-link" href="#proxied-applications" title="Direct link to heading">â</a></h3><p>For applications where it doesn&#x27;t make sense to embed the SDK a Ziti SDK based proxy can provide access to the application. Often the proxy may take the form of a sidecar and be co-located with the application. This minimizes the attack surface. There are a few things to note about this approach.</p><ol><li>The application will not be completely dark. It must accept connections from wherever the proxy is located. The proxy may be co-located with the application, so the attack surface area may be tiny. However, tiny is still bigger than zero.</li><li>Similarly, traffic can be encrypted between the client and the proxy, but traffic between the proxy and the application will not be covered under the Ziti end-to-end encryption. It may still be encrypted, if the client and server establish their own encryption at the discretion of the client and server implementors. </li><li>Via the proxy, the application is still represented by an identity and thus participates in policies.</li></ol><p>Services which use proxies for server side termination may require extra configuration, so that the proxing application knows how to connect to the server application. Service configurations are discussed more below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ziti-router-terminated-services">Ziti Router Terminated Services<a class="hash-link" href="#ziti-router-terminated-services" title="Direct link to heading">â</a></h3><p>Routers also have the ability to connect to applications providing services. This approach has its own advantages and disadvantages.</p><ol><li>Like the proxy approach, the application cannot be completely dark. The application must be reachable from the Ziti router. </li><li>Ziti currently only offers end-to-end encryption between two SDK applications. Sessions terminating at a router cannot be end-to-end encrypted by Ziti. The data may still be end-to-end encrypted by the client and server, but that is up to the client and server implementors.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">â</a></h3><table><thead><tr><th>Termination Type</th><th>End-to-end Zero Trust</th><th>Managed by Policies</th><th>Ziti Provided End-to-end encryption</th><th>Dark Server Application</th></tr></thead><tbody><tr><td>SDK Embedded</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>SDK Based Proxy</td><td>No, only to proxy</td><td>Yes (via Proxy)</td><td>Only to proxy. If desired, full end-to-end must be done externally</td><td>No. Can be relatively locked down, though</td></tr><tr><td>Ziti Router</td><td>No</td><td>No</td><td>No. If desired, end-to-end must be done externally</td><td>No. Can be relatively locked down, though.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terminators">Terminators<a class="hash-link" href="#terminators" title="Direct link to heading">â</a></h3><p>Terminators represent a way to connect to a specific server application for a specific service. </p><p>For an SDK based server (whether embedded or proxied), these are created automatically as the application connects and removed when the application disconnects. </p><p>For router terminated services they must be created manually. When creating a terminator manually, the following must be specified.</p><ol><li>The router which will connect to the server application</li><li>The binding. This indicates which Xgress component on the router will handle making the connection. This will generally be <code>transport</code> for tcp based applications and <code>udp</code> for UDP based applications<ol><li>See the ziti-fabric documentation for more information on the Xgress framework</li></ol></li><li>The address to connect to. This will generally take the form <code>&lt;protocol&gt;:&lt;host or ip&gt;:&lt;port&gt;</code><ol><li>Example: <code>tcp:localhost:5432</code></li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="availability-and-scaling">Availability and Scaling<a class="hash-link" href="#availability-and-scaling" title="Direct link to heading">â</a></h2><p>Services can be made highly available and/or horizontally scalable. There are two kinds of availability that server applications need to concern themselves with. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="router-hascaling">Router HA/Scaling<a class="hash-link" href="#router-hascaling" title="Direct link to heading">â</a></h3><p>The first is allowing multiple routers to connect to a single application. </p><p><strong>Multiple Routers</strong></p><p><img loading="lazy" alt="image" src="/assets/images/router-ha-70458d2f86318be0155118ce003c00ec.png" width="521" height="289" class="img_ev3q"></p><p>This ensures that the application will still be able to service requests even if a router fails or there is network partition separating a router and server application. It also will help ensure that the router layer doesn&#x27;t become a bottleneck, as more routers can be addeded as necessary to scale out connectivity. Finally, it provides multiple network paths to the application. This gives smart routing more to choose optimal routes from as network conditions change.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-hascaling">Application HA/Scaling<a class="hash-link" href="#application-hascaling" title="Direct link to heading">â</a></h3><p>The second is application availabilty and/or scalability. There will often be multiple instances of a service application running, either for failover or in a load balanced deployment.</p><p><strong>Failover Deployment</strong></p><p><img loading="lazy" alt="image" src="/assets/images/application-ha-0c10d100419445f137c47a20d6fbab13.png" width="521" height="289" class="img_ev3q"></p><p><strong>Horizontal Scale Deployment</strong></p><p><img loading="lazy" alt="image" src="/assets/images/horizontal-scale-a2574ff77b3aabd1e6306fc831209c3a.png" width="521" height="289" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xt">Xt<a class="hash-link" href="#xt" title="Direct link to heading">â</a></h3><p>All types of availability and scalability involve multiple terminators. What distinguishes an HA failover setup from a load-balanced horizontal scale setup is how new sessions are assigned to terminators. For failover, we want sessions to always go to the same service instance. For horizontal scale, we want to load balance sessions across available instances. </p><p>The fabric contains a framework called Xt (eXtensible Terminators) which allows defining terminator strategies and defines how terminator strategies and external components integrate with smart routing. The general flow of terminator selection goes as follows:</p><ol><li>A client requests a new session for a service</li><li>Smart routing finds all the active terminators for the session (active meaning the terminator&#x27;s router is connected)</li><li>Smart routing calculates a cost for each terminator then hands the service&#x27;s terminator strategy a list of terminators and their costs ranked from lowest to highest</li><li>The strategy returns the terminator that should be used</li><li>A new session is created using that path. </li></ol><p>Strategies will often work by adjusting terminator costs. The selection algorithm then simply returns the lowest cost option presented by smart routing. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="costs">Costs<a class="hash-link" href="#costs" title="Direct link to heading">â</a></h4><p>There are a number of elements which feed the smart routing cost algorithm.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="route-cost">Route Cost<a class="hash-link" href="#route-cost" title="Direct link to heading">â</a></h5><p>The cost of the route from the initiating route to the terminator router will be included in the terminator cost. This cost may be influenced by things such as link latencies and user determined link costs.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="static-cost">Static Cost<a class="hash-link" href="#static-cost" title="Direct link to heading">â</a></h5><p>Each terminator has a static cost which can be set or updated when the terminator is created. SDK applications can set the terminator cost when they invoke the Listen operation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="precedence">Precedence<a class="hash-link" href="#precedence" title="Direct link to heading">â</a></h4><p>Each terminator has a precedence. There are three precedence levels: <code>required</code>, <code>default</code> and <code>failed</code>.</p><p>Smart routing will always rank terminators with higher precedence levels higher than terminators with lower precedence levers. So required terminators will always be first, default second and failed third. Precedence levels can be used to implement HA. The primary will be marked as required and the secondary as default. When the primary is determined to be down, either by some internal or external set of heuristics, it will be marked as Failed and new sessions will go to the secondary. When the primary recovers it can be bumped back up to Required.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-cost">Dynamic Cost<a class="hash-link" href="#dynamic-cost" title="Direct link to heading">â</a></h5><p>Each terminator also has a dynamic cost that will move a terminator up and down relative to its precedence. This cost can be driven by stratagies or by external components. A strategy might use number of active of open sessions or dial successes and failures to drive the dynamic cost. </p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="effective-cost">Effective Cost<a class="hash-link" href="#effective-cost" title="Direct link to heading">â</a></h5><p>Each terminator has an associated precedence and dynamic cost. This can be reduced to a single cost. The cost algorithm ensures terminators at different precedence levels do not overlap. So a terminator which is marked failed, with dynamic cost 0, will always have a higher calculated cost than a terminator with default precedence and maximum value for dynamic cost. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="strategies">Strategies<a class="hash-link" href="#strategies" title="Direct link to heading">â</a></h4><p>The fabric currently provides four strategy implementations.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="smartrouting"><code>smartrouting</code><a class="hash-link" href="#smartrouting" title="Direct link to heading">â</a></h5><p>This is the default strategy. It always uses the lowest cost terminator. It drives costs as follows:</p><ul><li>Cost is proportional to number of open sessions</li><li>Dial failures drive the cost up</li><li>Dial successes drive the cost down, but only as much as they were previously driven up by failures</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="weighted"><code>weighted</code><a class="hash-link" href="#weighted" title="Direct link to heading">â</a></h5><p>This strategy drives costs in the same way as the <code>smartrouting</code> strategy. However instead of always picking the lowest cost terminator it does a weighted random selection across all terminators of the highest precedence. If a terminator has double the cost of another terminator it should get picked approximately half as often. </p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="random"><code>random</code><a class="hash-link" href="#random" title="Direct link to heading">â</a></h5><p>This strategy does not change terminator weights. It does simple random selection across all terminators of the highest precedence. </p><h1>Creating a Service</h1><p>Here&#x27;s how you can create a service.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Create Service UI</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Create Hosted Service UI</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Create Service CLI</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ol><li>On the left side nav bar, click &quot;Edge Services&quot;</li><li>In the top right corner of the screen click the &quot;plus&quot; image to add a new service</li><li>Choose a name for the serivce. Example &quot;my-first-service&quot;</li><li>Enter a host name for the service. Enter &quot;intercepted-hostname&quot;</li><li>Enter the port you want intercepted: 1111</li><li>Choose Router by name - for example &quot;ziti-gw01&quot; if you are using <a href="https://aws.amazon.com/marketplace/pp/B07YZLKMLV" target="_blank" rel="noopener noreferrer">Ziti Edge - Developer
Edition</a></li><li>For Endpoint Service choose:</li></ol><ul><li>protocol = tcp</li><li>host = actual-hostname</li><li>port = 2222</li></ul><ol><li>Select a cluster. If using <a href="https://aws.amazon.com/marketplace/pp/B07YZLKMLV" target="_blank" rel="noopener noreferrer">Ziti Edge - Developer Edition</a> choose
&quot;demo-c01&quot;</li><li>Leave Hosting Identities as is</li><li>Click save</li></ol></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ol><li>On the left side nav bar, click &quot;Edge Services&quot;</li><li>In the top right corner of the screen click the &quot;plus&quot; image to add a new service</li><li>Choose a name for the serivce. Example &quot;my-first-hosted-service&quot;</li><li>Enter a host name for the service. Enter &quot;intercepted-hostname&quot;</li><li>Enter the port you want intercepted: 1111</li><li>Choose &quot;Hosted (No Router)&quot; for the Router</li><li>Select a cluster. If using <a href="https://aws.amazon.com/marketplace/pp/B07YZLKMLV" target="_blank" rel="noopener noreferrer">Ziti Edge - Developer Edition</a> choose
&quot;demo-c01&quot;</li><li>Select one or more identities in &quot;Hosting Identities&quot; representing the identities which host the service</li><li>Click save</li></ol></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>To create a new service via CLI simply issue these commands: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># creates a new service named ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge create service ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># creates a new service named ssh with a terminator strategy which load-balances using random selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge create service ssh --terminator-strategy random</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># creates a router based terminator for ssh on router router1 which connects to the local machine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge create terminator ssh router1 tcp:localhost:22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># creates a new service named postgresql with a terminator strategy which does failover</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge create service postgresql --terminator-strategy ha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># creates a router based terminator for postgres on router router1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># this is the posgres primary, so precedence is set to required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge create terminator postgresql router1 tcp:pg-primary:5432 --precedence required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># creates a router based terminator for postgres on router router1 which connects to another machine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># this is the posgresql secondary, so precedence is left at default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge create terminator postgresql router1 tcp:pg-secondary:5432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># If the primary goes down, the controller will notice that dials are failing and set the </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># precedence to failed. New sessions will go to the secondary. When the primary is brought </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># back up, it can be marked as requred again</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ziti edge update terminator &lt;terminator-id&gt; --precedence required </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p></p></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/core-concepts/services/overview.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/core-concepts/identities/enrolling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Enrolling</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/core-concepts/services/creating"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Creating</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#service-name" class="table-of-contents__link toc-highlight">Service Name</a></li><li><a href="#service-termination" class="table-of-contents__link toc-highlight">Service Termination</a><ul><li><a href="#sdk-embedded-applications" class="table-of-contents__link toc-highlight">SDK Embedded Applications</a></li><li><a href="#proxied-applications" class="table-of-contents__link toc-highlight">Proxied Applications</a></li><li><a href="#ziti-router-terminated-services" class="table-of-contents__link toc-highlight">Ziti Router Terminated Services</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#terminators" class="table-of-contents__link toc-highlight">Terminators</a></li></ul></li><li><a href="#availability-and-scaling" class="table-of-contents__link toc-highlight">Availability and Scaling</a><ul><li><a href="#router-hascaling" class="table-of-contents__link toc-highlight">Router HA/Scaling</a></li><li><a href="#application-hascaling" class="table-of-contents__link toc-highlight">Application HA/Scaling</a></li><li><a href="#xt" class="table-of-contents__link toc-highlight">Xt</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 NetFoundry Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df9d7b9c.js"></script>
<script src="/assets/js/main.21755a42.js"></script>
</body>
</html>