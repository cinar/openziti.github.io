<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>YubiKey by Yubico | NetFoundry Ziti </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="YubiKey by Yubico | NetFoundry Ziti ">
    <meta name="generator" content="docfx 2.x">
    
    <link rel="shortcut icon" href="../../../images/favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
    <!--span>this is text</span-->
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../images/nflightbglogo_40.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div style="display: flex;">
                    <div class="form-group" style="valign: center;position: relative;">
                      <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                    </div>
                    <div style="position: relative">
                        &nbsp;
                    </div>
                    <div style="position: relative">
                        <a href="https://github.com/netfoundry">
                            <img src="../../../images/github-white.svg" alt="view us on github" title="view us on github" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://netfoundry.discourse.group">
                            <img src="../../../images/discourse_icon_halo.svg" alt="Start a conversation on Discourse" title="Start a conversation on Discourse" height="34px">
                        </a>
                    </div>
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="yubikey-by-yubico">YubiKey by Yubico</h1>

<p><a href="https://www.yubico.com/">Yubico</a> is a manufacturer of HSM deviceis. A popular line of HSM produced by Yubico is the
YubiKey. This quickstart guide will use specific device from Yubico - the <a href="https://www.yubico.com/product/YubiKey-5-nfc">YubiKey 5
nfc</a>.</p>
<h2 id="overview">Overview</h2>
<p>The <a href="https://www.yubico.com/product/YubiKey-5-nfc">YubiKey 5 nfc</a> is a multi-purpose device with a few different
security-minded uses. One of the applications on the device is an application called PIV or &quot;Personal Identity
Verification&quot;. PIV is a <a href="https://csrc.nist.gov/projects/piv/piv-standards-and-supporting-documentation">standard published by
NIST</a> and describes the kinds of
credentials which make up the standard. PIV credentials have certificates and key pairs, pin numbers, biometrics
like fingerprints and pictures, and other unique identifiers. When put together into a PIV credential, it provides
the capability to implement multi-factor authentication for networks, applications and buildings.</p>
<p>In this quickstart you will see the commands and tools needed to use a <a href="https://www.yubico.com/product/YubiKey-5-nfc">YubiKey 5
nfc</a> with a Ziti Network. This document is intended to serve as a
quickstart. That means limited context will be provided for each step. When appropriate there will be a small amount of
context or a comment included to aid in understanding of what is happening and why. Most if not all of these commands
are easily searched for using your search engine of choice.</p>
<div class="WARNING"><h5>Warning</h5><p>This quickstart intended audience is for more technically savvy indiviuals. You will need to be familar with the command
line interface of your operating system.</p>
</div>
<h2 id="prerequistites">Prerequistites</h2>
<ul>
<li><a href="https://www.yubico.com/product/YubiKey-5-nfc">YubiKey 5 nfc</a> - clearly you&#39;ll need one in order to use this
quickstart!</li>
<li><a href="https://github.com/OpenSC/OpenSC/wiki">OpenSC</a> is installed and <code>pkcs11-tool</code> is either on the PATH or at a known
location. Not required however this quickstart uses the <code>pkcs11-tool</code> to illustrate that the device is PKCS#11
compliant. HSM manufacturers will generally provide a similar tool and often expand it&#39;s usage. See more below.
<a href="https://developers.yubico.com/yubico-piv-tool/">yubico-piv-tool</a> - YubiKey privides a similar tool to the
<code>pkcs11-tool</code>. This tool is needed to be installed because it contains the pkcs#11 module (driver) for the HSM. As
this is a tool specific to Yubico we&#39;ve chosen to not use this in the following commands.</li>
<li>Ensure the YubiKey is factory reset. To avoid any compliations with existing information in the YubiKey ensure the
device is factory reset using the <a href="https://www.yubico.com/products/services-software/download/YubiKey-manager/">YubiKey
Manager</a>.</li>
<li>In order to successfully use the YubiKey the libraries provided by the <code>yubico-piv-tool</code> <em>MUST</em> either be on the path
or in a common location that is known to the OS. On linux this is likely done by the YubiKey software installation but
on Windows you&#39;ll need to take any additional actions highlighted in the Windows-specific sections.</li>
<li>Linux Only: If you&#39;re using linux - you&#39;ll need to follow the <a href="https://developers.yubico.com/yubico-piv-tool/">build
instructions</a> provided by Yubico. Before you can do anything with the
Yubikey you&#39;ll need to make sure the <code>libykcs11.so</code> exists on your system. When creating this quickstart the library
was built to <code>./yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so</code>.</li>
<li><a href="https://ubuntu.com/">Ubuntu</a> was used to test this guide. An attempt was also made with <a href="https://linuxmint.com/">linux
mint</a> however the attempt failed when trying to compile the Yubikey software and was aborted.
It would likely have worked if enough effort was put into discovering why that linux variant had issues pulling and
compiling the necessary software. If you see strange errors when following this guide and are not using Ubuntu it may
be related.</li>
<li>ziti, ziti-tunnel, ziti-enroller are all on the path.</li>
</ul>
<h2 id="lets-use-the-yubikey">Let&#39;s Use the YubiKey!</h2>
<p>Here&#39;s the list of steps we&#39;ll accomplish in this quickstart:</p>
<ul>
<li>Establish a bunch of environment variables to make it easy to copy/paste the other commands. You&#39;ll want to <em>look at
these environment variables</em>. They need to be setup properly. If you have problems with this guide it is almost
certainly because you have an environment variable setup incorrectly. Double check them.</li>
<li>Make a directory and generate a configuration files for Ziti</li>
<li>Use the <a href="https://netfoundry.jfrog.io/netfoundry/ziti-release/ziti/">Ziti CLI</a> to:<ul>
<li>create two identities - one demonstrating an RSA key, one EC</li>
<li>enroll the identities</li>
<li>create a test service</li>
<li>create test router/service policies</li>
</ul>
</li>
<li>Use the pkcs11-tool provided by OpenSC to interact with the YubiKey to:<ul>
<li>initialize the PIV app</li>
<li>create a key</li>
</ul>
</li>
<li>Use the <a href="https://netfoundry.jfrog.io/netfoundry/ziti-release/ziti-enroller/">ziti-enroller</a> to enroll the identities
using the YubiKey</li>
<li>Use the <a href="https://netfoundry.jfrog.io/netfoundry/ziti-release/ziti-tunnel/">ziti-tunnel</a> in proxy mode to verify things
are working and traffic is flowing over the Ziti Network</li>
</ul>
<div class="WARNING"><h5>Warning</h5><p>Do <em>NOT</em> use id <code>2</code> or <code>02</code> for any keys you add. Id <code>02</code> corresponds to the YubiKey&#39;s &quot;Management Key&quot;. You will not be
able to write a key into this location. The error you will see will indicate: <code>CKR_USER_NOT_LOGGED_IN</code>.</p>
</div>
<h3 id="establish-environment-variables">Establish Environment Variables</h3>
<p>Open a command line and establish the following environment varibles. Note that for the YubiKey we do <em>not</em> use id <code>02</code>
as it appears to be reserved by the YubiKey.  The default SOPIN and PIN are used as well. When using the YubiKey Manager
software the &quot;SO PIN&quot; corresponds to the &quot;Management Key&quot; while &quot;pin&quot; is the same both here and in the YubiKey Manager.</p>
<div class="tabGroup" id="tabgroup_VnP2eZrENS">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS_env-var-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS_env-var-linux" data-tab="env-var-linux" tabindex="0" aria-selected="true">Linux/MacOS</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS_env-var-windows" role="tab" aria-controls="tabpanel_VnP2eZrENS_env-var-windows" data-tab="env-var-windows" tabindex="-1">Windows</a>
</li>
</ul>
<section id="tabpanel_VnP2eZrENS_env-var-linux" role="tabpanel" data-tab="env-var-linux">
<pre><code># the name of the ziti controller you&#39;re logging into
export ZITI_CTRL=local-edge-controller
# the location of the certificate(s) to use to validate the controller
export ZITI_CTRL_CERT=/path/to/controller.cert

export ZITI_USER=myUserName
export ZITI_PWD=myPassword

# a name for the configuration
export HSM_NAME=yubikey_demo

# path to the yubikey pkcs11 libraries
export HSM_ROOT=/path/to/yubico-piv-tool-2.0.0
export PKCS11_MODULE=${HSM_ROOT}/ykcs11/.libs/libykcs11.so

# the id of the key - you probably want to leave these alone unless you know better
export HSM_ID1=01
export HSM_ID2=03

# the pins used when accessing the pkcs11 api
export HSM_SOPIN=010203040506070801020304050607080102030405060708
export HSM_PIN=123456
export RSA_ID=${HSM_NAME}${HSM_ID1}_rsa
export EC_ID=${HSM_NAME}${HSM_ID2}_ec

# location for the config files to be placed
export HSM_DEST=${HSM_ROOT}/${HSM_NAME}
export HSM_LABEL=${HSM_NAME}-label

# make an alias for ease
alias p=&#39;pkcs11-tool --module $PKCS11_MODULE&#39;
</code></pre></section>
<section id="tabpanel_VnP2eZrENS_env-var-windows" role="tabpanel" data-tab="env-var-windows" aria-hidden="true" hidden="hidden">
<div class="WARNING"><h5>Warning</h5><p>Ensure you use the correct dll. If you use an x86 dll with x64 binaries you&#39;ll get an error.</p>
</div>
<div class="WARNING"><h5>Warning</h5><p>With Windows - make sure you update the path to include the folder of libykcs11-1.dll as additional libraries are needed
by the pkcs11 driver!</p>
</div>
<pre><code>REM the name of the ziti controller you&#39;re logging into
SET ZITI_CTRL=local-edge-controller
REM the location of the certificate(s) to use to validate the controller
SET ZITI_CTRL_CERT=c:\path\to\controller.cert

SET ZITI_USER=myUserName
SET ZITI_PWD=myPassword

REM a name for the configuration
SET HSM_NAME=yubikey_windemo

REM the path to the root of the yubikey piv tool
SET HSM_ROOT=c:\path\to\yubico-piv-tool-2.0.0

REM path to the pkcs11 library
SET PATH=%PATH%;%HSM_ROOT%\bin
SET PKCS11_MODULE=%HSM_ROOT%\bin\libykcs11-1.dll

REM the id of the key - you probably want to leave these alone unless you know better
SET HSM_ID1=01
SET HSM_ID2=03
SET RSA_ID=%HSM_NAME%%HSM_ID1%_rsa
SET EC_ID=%HSM_NAME%%HSM_ID2%_ec

REM the pins used when accessing the pkcs11 api
SET HSM_SOPIN=010203040506070801020304050607080102030405060708
SET HSM_PIN=123456

SET HSM_DEST=%HSM_ROOT%\%HSM_NAME%
SET HSM_LABEL=%HSM_NAME%-label
SET HSM_TOKENS_DIR=%HSM_DEST%\tokens\

REM make an alias for ease
doskey p=&quot;c:\Program Files\OpenSC Project\OpenSC\tools\pkcs11-tool.exe&quot; --module %PKCS11_MODULE% $*
</code></pre></section>
</div>
<h3 id="make-directories-for-config-files">Make Directories for Config Files</h3>
<div class="tabGroup" id="tabgroup_VnP2eZrENS-1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-1_dirs-and-config-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS-1_dirs-and-config-linux" data-tab="dirs-and-config-linux" tabindex="0" aria-selected="true">Linux/MacOS</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-1_dirs-and-config-windows" role="tab" aria-controls="tabpanel_VnP2eZrENS-1_dirs-and-config-windows" data-tab="dirs-and-config-windows" tabindex="-1">Windows</a>
</li>
</ul>
<section id="tabpanel_VnP2eZrENS-1_dirs-and-config-linux" role="tabpanel" data-tab="dirs-and-config-linux">
<pre><code>cd ${HSM_ROOT}

rm -rf ${HSM_NAME}
mkdir -p ${HSM_NAME}

cd ${HSM_NAME}
</code></pre></section>
<section id="tabpanel_VnP2eZrENS-1_dirs-and-config-windows" role="tabpanel" data-tab="dirs-and-config-windows" aria-hidden="true" hidden="hidden">
<pre><code>cd /d %HSM_ROOT%

rmdir /s /q %HSM_NAME%
mkdir %HSM_NAME%

cd /d %HSM_NAME%
</code></pre></section>
</div>
<h3 id="use-the-ziti-cli">Use the Ziti CLI</h3>
<div class="tabGroup" id="tabgroup_VnP2eZrENS-2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-2_ziti-cli-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS-2_ziti-cli-linux" data-tab="ziti-cli-linux" tabindex="0" aria-selected="true">Linux/MacOS</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-2_ziti-cli-windows" role="tab" aria-controls="tabpanel_VnP2eZrENS-2_ziti-cli-windows" data-tab="ziti-cli-windows" tabindex="-1">Windows</a>
</li>
</ul>
<section id="tabpanel_VnP2eZrENS-2_ziti-cli-linux" role="tabpanel" data-tab="ziti-cli-linux">
<pre><code>ziti edge controller login $ZITI_CTRL:1280 -u $ZITI_USER -p $ZITI_PWD -c $ZITI_CTRL_CERT

# create a new identity and output the jwt to a known location
ziti edge controller create identity device &quot;${RSA_ID}&quot; -o &quot;${HSM_DEST}/${RSA_ID}.jwt&quot;

# create a second new identity and output the jwt to a known location
ziti edge controller create identity device &quot;${EC_ID}&quot; -o &quot;${HSM_DEST}/${EC_ID}.jwt&quot;
</code></pre></section>
<section id="tabpanel_VnP2eZrENS-2_ziti-cli-windows" role="tabpanel" data-tab="ziti-cli-windows" aria-hidden="true" hidden="hidden">
<pre><code>ziti edge controller login %ZITI_CTRL%:1280 -u %ZITI_USER% -p %ZITI_PWD% -c %ZITI_CTRL_CERT%

REM create a new identity and output the jwt to a known location
ziti edge controller create identity device &quot;%RSA_ID%&quot; -o &quot;%HSM_DEST%\%RSA_ID%.jwt&quot;

REM create a second new identity and output the jwt to a known location
ziti edge controller create identity device &quot;%EC_ID%&quot; -o &quot;%HSM_DEST%\%EC_ID%.jwt&quot;
</code></pre></section>
</div>
<h3 id="use-pkcs11-tool-to-setup-the-yubikey">Use pkcs11-tool to Setup the YubiKey</h3>
<div class="tabGroup" id="tabgroup_VnP2eZrENS-3">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-3_pkcs11-tool-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS-3_pkcs11-tool-linux" data-tab="pkcs11-tool-linux" tabindex="0" aria-selected="true">Linux/MacOS</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-3_pkcs11-tool-windows" role="tab" aria-controls="tabpanel_VnP2eZrENS-3_pkcs11-tool-windows" data-tab="pkcs11-tool-windows" tabindex="-1">Windows</a>
</li>
</ul>
<section id="tabpanel_VnP2eZrENS-3_pkcs11-tool-linux" role="tabpanel" data-tab="pkcs11-tool-linux">
<pre><code>p --init-token --label &quot;ziti-test-token&quot; --so-pin $HSM_SOPIN

# create a couple of keys - one rsa and one ec
p -k --key-type rsa:2048 --usage-sign --usage-decrypt --login --id $HSM_ID1 --login-type so --so-pin $HSM_SOPIN --label defaultkey
p -k --key-type EC:prime256v1 --usage-sign --usage-decrypt --login --id $HSM_ID2 --login-type so --so-pin $HSM_SOPIN --label defaultkey
</code></pre></section>
<section id="tabpanel_VnP2eZrENS-3_pkcs11-tool-windows" role="tabpanel" data-tab="pkcs11-tool-windows" aria-hidden="true" hidden="hidden">
<pre><code>p --init-token --label &quot;ziti-test-token&quot; --so-pin %HSM_SOPIN%

REM create a couple of keys - one rsa and one ec
p -k --key-type rsa:2048 --usage-sign --usage-decrypt --login --id %HSM_ID1% --login-type so --so-pin %HSM_SOPIN% --label defaultkey
p -k --key-type EC:prime256v1 --usage-sign --usage-decrypt --login --id %HSM_ID2% --login-type so --so-pin %HSM_SOPIN% --label defaultkey
</code></pre></section>
</div>
<h3 id="use-ziti-enroller-to-enroll-the-identities">Use ziti-enroller to Enroll the Identities</h3>
<div class="tabGroup" id="tabgroup_VnP2eZrENS-4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-4_enroll-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS-4_enroll-linux" data-tab="enroll-linux" tabindex="0" aria-selected="true">Linux/MacOS</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-4_enroll-windows" role="tab" aria-controls="tabpanel_VnP2eZrENS-4_enroll-windows" data-tab="enroll-windows" tabindex="-1">Windows</a>
</li>
</ul>
<section id="tabpanel_VnP2eZrENS-4_enroll-linux" role="tabpanel" data-tab="enroll-linux">
<pre><code>ziti-enroller -j &quot;${HSM_DEST}/${RSA_ID}.jwt&quot; -k &quot;pkcs11://${PKCS11_MODULE}?id=${HSM_ID1}&amp;pin=${HSM_PIN}&quot; -v
ziti-enroller -j &quot;${HSM_DEST}/${EC_ID}.jwt&quot; -k &quot;pkcs11://${PKCS11_MODULE}?id=${HSM_ID2}&amp;pin=${HSM_PIN}&quot; -v
</code></pre></section>
<section id="tabpanel_VnP2eZrENS-4_enroll-windows" role="tabpanel" data-tab="enroll-windows" aria-hidden="true" hidden="hidden">
<pre><code>ziti-enroller -j &quot;%HSM_DEST%\%RSA_ID%.jwt&quot; -k &quot;pkcs11://%PKCS11_MODULE%?id=%HSM_ID1%&amp;pin=%HSM_PIN%&quot; -v
ziti-enroller -j &quot;%HSM_DEST%\%EC_ID%.jwt&quot; -k &quot;pkcs11://%PKCS11_MODULE%?id=%HSM_ID2%&amp;pin=%HSM_PIN%&quot; -v
</code></pre></section>
</div>
<h3 id="use-ziti-tunnel-to-verify-things-work">Use ziti-tunnel to Verify Things Work</h3>
<div class="tabGroup" id="tabgroup_VnP2eZrENS-5">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-5_start-tunnel-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS-5_start-tunnel-linux" data-tab="start-tunnel-linux" tabindex="0" aria-selected="true">Linux/MacOS</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-5_start-tunnel-windows" role="tab" aria-controls="tabpanel_VnP2eZrENS-5_start-tunnel-windows" data-tab="start-tunnel-windows" tabindex="-1">Windows</a>
</li>
</ul>
<section id="tabpanel_VnP2eZrENS-5_start-tunnel-linux" role="tabpanel" data-tab="start-tunnel-linux">
<pre><code># if you only have a single edge router this command will work without the need for copy/paste
EDGE_ROUTER_ID=$(ziti edge controller list edge-routers | cut -d &quot; &quot; -f2)

# IF the above command doesn&#39;t work - run this command and get the id from the first edge-router.
# ziti edge controller list edge-routers

# then use the id returned from the above command and put it into a variable for use in a momment
# EDGE_ROUTER_ID={insert the &#39;id&#39; from above - example: 64d4967b-5474-4f06-8548-5700ed7bfa80}

# remove/recreate the config - here we&#39;ll be instructing the tunneler to listen on localhost and port 9000
ziti edge controller delete config wttrconfig
ziti edge controller create config wttrconfig ziti-tunneler-client.v1 &quot;{ \&quot;hostname\&quot; : \&quot;localhost\&quot;, \&quot;port\&quot; : 9000 }&quot;

# recreate the service with the EDGE_ROUTER_ID from above. Here we are adding a ziti service that will
# send a request to wttr.in to retreive a weather forecast
ziti edge controller delete service wttr.ziti
ziti edge controller create service wttr.ziti &quot;${EDGE_ROUTER_ID}&quot; tcp://wttr.in:80 --configs wttrconfig

# start one or both proxies
ziti-tunnel proxy -i &quot;${HSM_DEST}/${RSA_ID}.json&quot; wttr.ziti:8000 -v &amp;
ziti-tunnel proxy -i &quot;${HSM_DEST}/${EC_ID}.json&quot; wttr.ziti:9000 -v &amp;

# use a browser - or curl to verify the ziti tunneler is listening locally and the traffic has flowed over the ziti network
curl -H &quot;Host: wttr.in&quot; http://localhost:8000
curl -H &quot;Host: wttr.in&quot; http://localhost:9000
</code></pre></section>
<section id="tabpanel_VnP2eZrENS-5_start-tunnel-windows" role="tabpanel" data-tab="start-tunnel-windows" aria-hidden="true" hidden="hidden">
<pre><code>REM these two commands can&#39;t be copied and pasted - you need to get the result of the first command and use it in the next
REM run this command and get the id from the first edge-router.
ziti edge controller list edge-routers

REM use the id returned from the above command and put it into a variable for use in a momment
SET EDGE_ROUTER_ID={insert the &#39;id&#39; from above - example: 64d4967b-5474-4f06-8548-5700ed7bfa80}

REM remove/recreate the config - here we&#39;ll be instructing the tunneler to listen on localhost and port 9000
ziti edge controller delete config wttrconfig
ziti edge controller create config wttrconfig ziti-tunneler-client.v1 &quot;{ \&quot;hostname\&quot; : \&quot;localhost\&quot;, \&quot;port\&quot; : 9000 }&quot;

REM recreate the service with the EDGE_ROUTER_ID from above. Here we are adding a ziti service that will
REM send a request to wttr.in to retreive a weather forecast
ziti edge controller delete service wttr.ziti
ziti edge controller create service wttr.ziti &quot;%EDGE_ROUTER_ID%&quot; tcp://wttr.in:80 --configs wttrconfig

REM start one or both proxies - use ctrl-break or ctrl-pause to terminate these processes 
start /b ziti-tunnel proxy -i &quot;%HSM_DEST%/%RSA_ID%.json&quot; wttr.ziti:8000 -v
start /b ziti-tunnel proxy -i &quot;%HSM_DEST%/%EC_ID%.json&quot; wttr.ziti:9000 -v

REM use a browser - or curl to verify the ziti tunneler is listening locally and the traffic has flowed over the ziti network
curl -H &quot;Host: wttr.in&quot; http://localhost:8000 &gt; &quot;%HSM_DEST%\example_%RSA_ID%.txt&quot;
curl -H &quot;Host: wttr.in&quot; http://localhost:9000 &gt; &quot;%HSM_DEST%\example_%EC_ID%.txt&quot;

REM set the codepage for the cmd prompt so that the output looks nice
chcp 65001

REM show the results in the console
type &quot;%HSM_DEST%\example_%RSA_ID%.txt&quot;
type &quot;%HSM_DEST%\example_%EC_ID%.txt&quot;

REM ctrl-break or ctrl-pause to kill the tunnelers
</code></pre></section>
</div>
<h3 id="putting-it-all-together">Putting It All Together</h3>
<p>Above we&#39;ve only shown the commands that need to run and not what the output of those commands would look like. Here
we&#39;ll see all the commands put together along with all the output from the commands. This section is long - you are
warned! Also note that this content is subject to change. If the output you see is not identical it&#39;s because the
software has changed since this information was captured. File an <a href="https://github.com/netfoundry/ziti-doc/issues">issue</a>
if you&#39;d like to see it updated.</p>
<div class="tabGroup" id="tabgroup_VnP2eZrENS-6">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-6_hidden-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS-6_hidden-linux" data-tab="hidden-linux" tabindex="0" aria-selected="true">Sample Output</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-6_verify-linux" role="tab" aria-controls="tabpanel_VnP2eZrENS-6_verify-linux" data-tab="verify-linux" tabindex="-1">Linux/MacOS</a>
</li>
<li role="presentation">
<a href="#tabpanel_VnP2eZrENS-6_verify-windows" role="tab" aria-controls="tabpanel_VnP2eZrENS-6_verify-windows" data-tab="verify-windows" tabindex="-1">Windows</a>
</li>
</ul>
<section id="tabpanel_VnP2eZrENS-6_hidden-linux" role="tabpanel" data-tab="hidden-linux">
<p>The tabs to the right contain example output from running all the commands in sequence. If you want to see what the
output would likely look like click one of the tabs to the right. Reminder - it&#39;s a lot of commands and a lot of output!
:)</p>
</section>
<section id="tabpanel_VnP2eZrENS-6_verify-linux" role="tabpanel" data-tab="verify-linux" aria-hidden="true" hidden="hidden">
<pre><code>-- coming soon--    
cd@cd-ubuntuvm: # the name of the ziti controller you&#39;re logging into
cd@cd-ubuntuvm: export ZITI_CTRL=local-edge-controller
cd@cd-ubuntuvm: # the location of the certificate(s) to use to validate the controller
cd@cd-ubuntuvm: export ZITI_CTRL_CERT=/path/to/controller.cert
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: export ZITI_USER=myUserName
cd@cd-ubuntuvm: export ZITI_PWD=myPassword
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # a name for the configuration
cd@cd-ubuntuvm: export HSM_NAME=yubikey_demo
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # path to the yubikey pkcs11 libraries
cd@cd-ubuntuvm: export HSM_ROOT=/path/to/yubico-piv-tool-2.0.0
cd@cd-ubuntuvm: export PKCS11_MODULE=${HSM_ROOT}/ykcs11/.libs/libykcs11.so
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # the id of the key - you probably want to leave these alone unless you know better
cd@cd-ubuntuvm: export HSM_ID1=01
cd@cd-ubuntuvm: export HSM_ID2=03
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # the pins used when accessing the pkcs11 api
cd@cd-ubuntuvm: export HSM_SOPIN=010203040506070801020304050607080102030405060708
cd@cd-ubuntuvm: export HSM_PIN=123456
cd@cd-ubuntuvm: export RSA_ID=${HSM_NAME}${HSM_ID1}_rsa
cd@cd-ubuntuvm: export EC_ID=${HSM_NAME}${HSM_ID2}_ec
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # location for the config files to be placed
cd@cd-ubuntuvm: export HSM_DEST=${HSM_ROOT}/${HSM_NAME}
cd@cd-ubuntuvm: export HSM_LABEL=${HSM_NAME}-label
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # make an alias for ease
cd@cd-ubuntuvm: alias p=&#39;pkcs11-tool --module $PKCS11_MODULE&#39;
cd@cd-ubuntuvm: cd ${HSM_ROOT}
rm -rf ${HSM_NAME}
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: rm -rf ${HSM_NAME}
mkdir -p ${HSM_NAME}
cd@cd-ubuntuvm: mkdir -p ${HSM_NAME}
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: cd ${HSM_NAME}
cd@cd-ubuntuvm: ziti edge controller login $ZITI_CTRL:1280 -u $ZITI_USER -p $ZITI_PWD -c $ZITI_CTRL_CERT
# create a new identity and output the jwt to a known location
ziti edge controller create identity device &quot;${RSA_ID}&quot; -o &quot;${HSM_DEST}/${RSA_ID}.jwt&quot;

# create a second new identity and output the jwt to a known location
ziti edge controller create identity device &quot;${EC_ID}&quot; -o &quot;${HSM_DEST}/${EC_ID}.jwt&quot;Token: 7083e601-cc2f-4636-94c0-959174e76264
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # create a new identity and output the jwt to a known location
cd@cd-ubuntuvm: ziti edge controller create identity device &quot;${RSA_ID}&quot; -o &quot;${HSM_DEST}/${RSA_ID}.jwt&quot;
76877717-9bce-4f34-ae7a-2ce313b8267a
Enrollment expires at 2020-02-24T14:56:19.961322754Z
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # create a second new identity and output the jwt to a known location
cd@cd-ubuntuvm: ziti edge controller create identity device &quot;${EC_ID}&quot; -o &quot;${HSM_DEST}/${EC_ID}.jwt&quot;
bdd18e58-e474-4ed3-98eb-c68ed96377be
Enrollment expires at 2020-02-24T14:56:21.673599433Z
cd@cd-ubuntuvm: p --init-token --label &quot;ziti-test-token&quot; --so-pin $HSM_SOPIN
p -k --key-type rsa:2048 --usage-sign --usage-decrypt --login --id $HSM_ID1 --login-type so --so-pin $HSM_SOPIN --label defaultkey
p -k --key-type EC:prime256v1 --usage-sign --usage-decrypt --login --id $HSM_ID2 --login-type so --so-pin $HSM_SOPIN --label defaultkeyUsing slot 0 with a present token (0x0)
Token successfully initialized
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # create a couple of keys - one rsa and one ec
cd@cd-ubuntuvm: p -k --key-type rsa:2048 --usage-sign --usage-decrypt --login --id $HSM_ID1 --login-type so --so-pin $HSM_SOPIN --label defaultkey
Using slot 0 with a present token (0x0)
Key pair generated:
Private Key Object; RSA
  label:      Private key for PIV Authentication
  ID:         01
  Usage:      decrypt, sign
Public Key Object; RSA 2048 bits
  label:      Public key for PIV Authentication
  ID:         01
  Usage:      encrypt, verify
cd@cd-ubuntuvm: p -k --key-type EC:prime256v1 --usage-sign --usage-decrypt --login --id $HSM_ID2 --login-type so --so-pin $HSM_SOPIN --label defaultkey
Using slot 0 with a present token (0x0)
Key pair generated:
Private Key Object; EC
  label:      Private key for Key Management
  ID:         03
  Usage:      decrypt, sign
Public Key Object; EC  EC_POINT 256 bits
  EC_POINT:   044104ee01d2c979d4050a2f6e357b2cbe518c3adf816cb08c5b3116318b9cc92328213bb923ea1a3ce9bc46093ffec03912b1e7eda679287fd65419e47d337ca0bb8c
  EC_PARAMS:  06082a8648ce3d030107
  label:      Public key for Key Management
  ID:         03
  Usage:      encrypt, verify
cd@cd-ubuntuvm: ziti-enroller -j &quot;${HSM_DEST}/${RSA_ID}.jwt&quot; -k &quot;pkcs11://${PKCS11_MODULE}?id=${HSM_ID1}&amp;pin=${HSM_PIN}&quot; -v
DEBU[0000] jwt to parse: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbSI6Im90dCIsImV4cCI6MTU4MjU1NjE3OSwiaXNzIjoiaHR0cHM6Ly9sb2NhbC1lZGdlLWNvbnRyb2xsZXI6MTI4MCIsImp0aSI6Ijk5NjVlZmQzLTliMjItNDk3ZS04NDdiLTM1NWI3MjE1NTZjMyIsInN1YiI6Ijc2ODc3NzE3LTliY2UtNGYzNC1hZTdhLTJjZTMxM2I4MjY3YSJ9.ohrYUZQK5xum-70AYARu8hYYxhvA9Cm2rEln6jVp8VDvMLRuIQi9bXNO1e2NQtkZLGzo3akg4Brx_QxM-9SIRKdBDYzgaN_otpV6y9XAQjVlarVvtA1bBA9OfQU1SyVGNkkaA2l660cY5gfsGb5TqBQt6wQ7KvMfzZvPhXFdQAMoXW-O2OaRh3jJGPne29-Hoz_thObv5PMTVlCGpzO6tKKfPnoV9p8HchjLHMMybEZO_xITyY_6UmkOPpeSJHdjWxJdkXu0xT8wC9PzAXK2xYYwgmW4yA8ygz2RJP6gXYd5maD-f1jgh87ELeN5dG2ksuy5Fh3_kyFAGg1X7dSnfmXSA0fWH-YPK54aSJe2fcCIt41O9pnqwepPT_7nCB4wSxVhuIugUBh_wYeJzXKI8tVnyv8nLyWhYqMwKRqTtiJM7EtxpBUPD6E35x3d4bw_fkVJ5z36NOIaGRmqhltPIsYMaFDwIE-nUU714Ra-cf8xN9lHuNoi_4Ehf8sR2YwLTsk7mJ9TKZkhLIj2KgwjL2KNCoM9n6MQtJJMq3Ae6H_xVxi2-DA_9zkbusdNi2j11OoIAtBGJQ4ONC5ekRsp_bTbb9GAxF-fO8oAQeFUXWyCpywRV8gT3G4huAlcofZTDnMtcyVvTJbvs8zYRtBM9jCKpUOmHuzb4FefgU-6kP0
INFO[0000] using engine : pkcs11
DEBU[0000] loading key                                   context=pkcs11 url=&quot;pkcs11:///path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so?id=01&amp;pin=123456&quot;
INFO[0000] using driver: /path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so  context=pkcs11
WARN[0000] slot not specified, using first slot reported by the driver (0)  context=pkcs11
DEBU[0001] found signing mechanism                       context=pkcs11 sign mechanism=0
DEBU[0001] no cas provided in caPool. using system provided cas
DEBU[0001] fetching certificates from server
DEBU[0001] loading key                                   context=pkcs11 url=&quot;pkcs11:///path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so?id=01&amp;pin=123456&quot;
INFO[0001] using driver: /path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so  context=pkcs11
WARN[0002] slot not specified, using first slot reported by the driver (0)  context=pkcs11
DEBU[0002] found signing mechanism                       context=pkcs11 sign mechanism=0
enrolled successfully. identity file written to: /path/to/yubico-piv-tool-2.0.0/yubikey_demo/yubikey_demo01_rsa.jsoncd@cd-ubuntuvm: ziti-enroller -j &quot;${HSM_DEST}/${EC_ID}.jwt&quot; -k &quot;pkcs11://${PKCS11_MODULE}?id=${HSM_ID2}&amp;pin=${HSM_PIN}&quot; -v
DEBU[0000] jwt to parse: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbSI6Im90dCIsImV4cCI6MTU4MjU1NjE4MSwiaXNzIjoiaHR0cHM6Ly9sb2NhbC1lZGdlLWNvbnRyb2xsZXI6MTI4MCIsImp0aSI6IjQwYTg1NmMxLWFiZmItNDQ4ZS1hN2E3LWE3YjZkMzVmYWU4OSIsInN1YiI6ImJkZDE4ZTU4LWU0NzQtNGVkMy05OGViLWM2OGVkOTYzNzdiZSJ9.o5hGXqZXWUuj-zkg-Xd335AbZUe9zNtvQmhE4cNFZNw40eRXNTBeFntLWjWv7-41AtsHbPwmQgWQfDdHS8JuLbhLS-8ZNSL3ZThBwnTiKtgYQvg_aArcu1FbPiw3jdiiHqXu0JoIToCEFX4kMjAJIZlzRi05J0d5w6Wvvjy3V7SqT_8viLla6l3PXsa1_xnHCc89HebuKB_qYds-XO2JvXTOFP0A3dSe6UgierjrTPvRxLMbf8TIfSOFtAc6bbSy17H8S0XrNiL-1bA9Ja9KKpB_ynGTygpM3h1vXda0niJN-_TpPdTX9kFEXOn-DpvAGKW8X6ggPlnpF7Rmfx9AEarA9ft-nRjx4Z4vyoAlukSc7LfnjAqTg9CCsN0-hKB1d1PnAOuWfHP5IZ2w1zibcUvdRQMoW2Twk_P75MP8rjr19VtZu5bDweZjP10-eHt3_QYeujaylBfb7VkJuRtSyh6IeWAb-IlIaJx7hzjGqssqNPn0vqVdf43Sc0h-PJcVTOkNPpcBIbxHPL5IVyujCWUSj4NUSgVh72uQIKjxC-WrkT8i-hEnGbJRYUL2NDcS190yt21AJAAkDPBTiFA_LR0aR7lEPzQV-lsjJzjmta7V460OKATsU8oo82_S8dVv8oYndk2kRboVsCWvR7_6H95CEnmRjAfI0Emxwkg1raA
INFO[0000] using engine : pkcs11
DEBU[0000] loading key                                   context=pkcs11 url=&quot;pkcs11:///path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so?id=03&amp;pin=123456&quot;
INFO[0000] using driver: /path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so  context=pkcs11
WARN[0000] slot not specified, using first slot reported by the driver (0)  context=pkcs11
DEBU[0001] found signing mechanism                       context=pkcs11 sign mechanism=0
DEBU[0001] EC oid[1.2.840.10045.3.1.7], rest: [], err: &lt;nil&gt;  context=pkcs11
DEBU[0001] no cas provided in caPool. using system provided cas
DEBU[0001] fetching certificates from server
DEBU[0001] loading key                                   context=pkcs11 url=&quot;pkcs11:///path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so?id=03&amp;pin=123456&quot;
INFO[0001] using driver: /path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so  context=pkcs11
WARN[0001] slot not specified, using first slot reported by the driver (0)  context=pkcs11
DEBU[0001] found signing mechanism                       context=pkcs11 sign mechanism=0
DEBU[0001] EC oid[1.2.840.10045.3.1.7], rest: [], err: &lt;nil&gt;  context=pkcs11
enrolled successfully. identity file written to: /path/to/yubico-piv-tool-2.0.0/yubikey_demo/yubikey_demo03_ec.jsoncd@cd-ubuntuvm:
cd@cd-ubuntuvm: # if you only have a single edge router this command will work without the need for copy/paste
cd@cd-ubuntuvm: EDGE_ROUTER_ID=$(ziti edge controller list edge-routers | cut -d &quot; &quot; -f2)
# IF the above command doesn&#39;t work - run this command and get the id from the first edge-router.
# ziti edge controller list edge-routers

# then use the id returned from the above command and put it into a variable for use in a momment
# EDGE_ROUTER_ID={insert the &#39;id&#39; from above - example: 64d4967b-5474-4f06-8548-5700ed7bfa80}

# remove/recreate the config - here we&#39;ll be instructing the tunneler to listen on localhost and port 9000
ziti edge controller delete config wttrconfig
ziti edge controller create config wttrconfig ziti-tunneler-client.v1 &quot;{ \&quot;hostname\&quot; : \&quot;localhost\&quot;, \&quot;port\&quot; : 9000 }&quot;

# recreate the service with the EDGE_ROUTER_ID from above. Here we are adding a ziti service that will
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # IF the above command doesn&#39;t work - run this command and get the id from the first edge-router.
cd@cd-ubuntuvm: # ziti edge controller list edge-routers
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # then use the id returned from the above command and put it into a variable for use in a momment
cd@cd-ubuntuvm: # EDGE_ROUTER_ID={insert the &#39;id&#39; from above - example: 64d4967b-5474-4f06-8548-5700ed7bfa80}
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # remove/recreate the config - here we&#39;ll be instructing the tunneler to listen on localhost and port 9000
cd@cd-ubuntuvm: ziti edge controller delete config wttrconfig
ziti edge controller delete service wttr.ziti
ziti edge controller create service wttr.ziti &quot;${EDGE_ROUTER_ID}&quot; tcp://wttr.in:80 --configs wttrconfig

# start one or both proxies
ziti-tunnel proxy -i &quot;${HSM_DEST}/${RSA_ID}.json&quot; wttr.ziti:8000 -v &amp;
ziti-tunnel proxy -i &quot;${HSM_DEST}/${EC_ID}.json&quot; wttr.ziti:9000 -v &amp;
cd@cd-ubuntuvm: ziti edge controller create config wttrconfig ziti-tunneler-client.v1 &quot;{ \&quot;hostname\&quot; : \&quot;localhost\&quot;, \&quot;port\&quot; : 9000 }&quot;
4ff768fa-0e7e-4b4d-ab4e-5c5aec5bd28d
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # recreate the service with the EDGE_ROUTER_ID from above. Here we are adding a ziti service that will
cd@cd-ubuntuvm: # send a request to wttr.in to retreive a weather forecast
cd@cd-ubuntuvm: ziti edge controller delete service wttr.ziti
cd@cd-ubuntuvm: ziti edge controller create service wttr.ziti &quot;${EDGE_ROUTER_ID}&quot; tcp://wttr.in:80 --configs wttrconfig
1827c649-9ba6-4f5a-b122-a8cb9d4e4893
cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # start one or both proxies
cd@cd-ubuntuvm: ziti-tunnel proxy -i &quot;${HSM_DEST}/${RSA_ID}.json&quot; wttr.ziti:8000 -v &amp;
[1] 5969
cd@cd-ubuntuvm: ziti-tunnel proxy -i &quot;${HSM_DEST}/${EC_ID}.json&quot; wttr.ziti:9000 -v &amp;
[2] 5970
cd@cd-ubuntuvm: [   0.001]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Start: starting proxy interceptor
[   0.001]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Start: starting proxy interceptor
[   0.002]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {url=[pkcs11:///path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so?id=03&amp;pin=123456]} loading key
[   0.002]    INFO github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: using driver: /path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so
[   0.004]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {url=[pkcs11:///path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so?id=01&amp;pin=123456]} loading key
[   0.004]    INFO github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: using driver: /path/to/yubico-piv-tool-2.0.0/ykcs11/.libs/libykcs11.so
[   0.085] WARNING github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: slot not specified, using first slot reported by the driver (0)
[   1.793]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {sign mechanism=[0]} found signing mechanism
[   1.793]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.loadECDSApub [pkcs11]: EC oid[1.2.840.10045.3.1.7], rest: [], err: &lt;nil&gt;
[   1.793]    INFO github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: attempting to authenticate
[   1.912]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: {token=[426a9b25-5f9c-4d3d-9319-30096cb584fc] id=[30b4cc4a-1e71-4e34-971c-bd5bead0477b]} Got api session: {30b4cc4a-1e71-4e34-971c-bd5bead0477b 426a9b25-5f9c-4d3d-9319-30096cb584fc}
[   1.912]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token 426a9b25-5f9c-4d3d-9319-30096cb584fc
[   1.956]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token 426a9b25-5f9c-4d3d-9319-30096cb584fc
[   2.000]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service wttr.ziti
[   2.000]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: requesting session from https://local-edge-controller:1280/sessions
[   2.000]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: {service_id=[1827c649-9ba6-4f5a-b122-a8cb9d4e4893]} requesting session
[   2.033]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {id=[ee783e84-c888-4912-ba1b-b79334590d3e] service=[wttr.ziti]} acquired network session
[   2.034]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service netcat7256
[   2.034]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {service=[netcat7256]} service netcat7256 was not specified at initialization. not intercepting
[   2.034]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).handleTCP: {service=[wttr.ziti] addr=[0.0.0.0:9000]} service is listening
[   2.038] WARNING github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: slot not specified, using first slot reported by the driver (0)
[   3.863]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {sign mechanism=[0]} found signing mechanism
[   3.864]    INFO github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: attempting to authenticate
[   4.099]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: {token=[a2d721d4-4b4a-466f-b310-b7eabd539e75] id=[deaf5b97-e467-431a-9f16-4546e4ef42fc]} Got api session: {deaf5b97-e467-431a-9f16-4546e4ef42fc a2d721d4-4b4a-466f-b310-b7eabd539e75}
[   4.099]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token a2d721d4-4b4a-466f-b310-b7eabd539e75
[   4.146]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token a2d721d4-4b4a-466f-b310-b7eabd539e75
[   4.189]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service netcat7256
[   4.189]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {service=[netcat7256]} service netcat7256 was not specified at initialization. not intercepting
[   4.189]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service wttr.ziti
[   4.189]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: requesting session from https://local-edge-controller:1280/sessions
[   4.189]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: {service_id=[1827c649-9ba6-4f5a-b122-a8cb9d4e4893]} requesting session
[   4.222]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {service=[wttr.ziti] id=[a53212ef-404e-4528-9d36-02852db9c595]} acquired network session
[   4.222]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).handleTCP: {service=[wttr.ziti] addr=[0.0.0.0:8000]} service is listening

cd@cd-ubuntuvm:
cd@cd-ubuntuvm: # use a browser - or curl to verify the ziti tunneler is listening locally and the traffic has flowed over the ziti network
cd@cd-ubuntuvm: curl -H &quot;Host: wttr.in&quot; http://localhost:8000
[  12.111]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: started
[  12.315]   DEBUG github.com/netfoundry/ziti-foundation/transport/tls.Dial: server provided [2] certificates
[  12.315]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: started
[  12.316]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: exited
[  12.316]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: exited
[  12.316]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxAddSinkEvent).Handle: {connId=[1]} Added sink to mux. Current sink count: 1
[  12.316]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).AddMsgSink: {connId=[1]} added to msg mux
[  12.316]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).txer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{oEzq}]: started
[  12.316]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{oEzq}]: started
[  12.557]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{oEzq}]: waiter found for message. type [60784], sequence [1], replyFor [1]
[  12.557]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Connect: {connId=[1]} connected
[  12.557]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {src-remote=[127.0.0.1:41838] src-local=[127.0.0.1:8000] dst-local=[:1] dst-remote=[wttr.ziti]} tunnel started
[  12.558]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgChannel).WriteTraced: {connId=[1] type=[EdgeDataType] chSeq=[-1] edgeSeq=[1]} writing 71 bytes
[  12.558]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
[  12.735]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgEvent).Handle: {seq=[1] connId=[1]} handling received EdgeDataType
[  12.735]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} got buffer from queue 8852 bytes
[  12.735]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
Weather report: Laurelton, United States

              Overcast
      .--.     14..24 °F
  .-(    ).   ↘ 13 mph
  (___.__)__)  9 mi
              0.0 in
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Fri 14 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │     \   /     Sunny          │     \   /     Clear          │     \   /     Clear          │
│  _ /&quot;&quot;.-.     6..19 °F       │      .-.      8..21 °F       │      .-.      8..19 °F       │      .-.      3..14 °F       │
│    \_(   ).   ↘ 11-13 mph    │   ― (   ) ―   ↘ 11-13 mph    │   ― (   ) ―   ↗ 11-13 mph    │   ― (   ) ―   ↓ 8-13 mph     │
│    /(___(__)  5 mi           │      `-’      6 mi           │      `-’      6 mi           │      `-’      6 mi           │
│               0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Sat 15 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│     \   /     Sunny          │    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │
│      .-.      14..17 °F      │  _ /&quot;&quot;.-.     17..24 °F      │  _ /&quot;&quot;.-.     21..30 °F      │  _ /&quot;&quot;.-.     17..24 °F      │
│   ― (   ) ―   ↖ 3 mph        │    \_(   ).   ↑ 6-8 mph      │    \_(   ).   ↑ 9-14 mph     │    \_(   ).   ↑ 8-14 mph     │
│      `-’      6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │
│     /   \     0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Sun 16 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │    \  /       Partly cloudy  │               Overcast       │               Overcast       │
│  _ /&quot;&quot;.-.     24..30 °F      │  _ /&quot;&quot;.-.     35..39 °F      │      .--.     37..39 °F      │      .--.     32..33 °F      │
│    \_(   ).   ↗ 4-7 mph      │    \_(   ).   ↗ 7-8 mph      │   .-(    ).   → 6-9 mph      │   .-(    ).   ↗ 3-8 mph      │
│    /(___(__)  6 mi           │    /(___(__)  6 mi           │  (___.__)__)  6 mi           │  (___.__)__)  6 mi           │
│               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘

Follow @igor_chubin for wttr.in updates
[  12.735]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {dst-remote=[wttr.ziti] src-remote=[127.0.0.1:41838] src-local=[127.0.0.1:8000] dst-local=[:1]} stopping pipe
[  12.735]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: begin
[  12.735]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxRemoveSinkEvent).Handle: {connId=[1]} Removed sink from mux. Current sink count: 0
[  12.736]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).RemoveMsgSinkById: {connId=[1]} removed from msg mux
[  12.736]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: end
cd@cd-ubuntuvm: [  13.736]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} sequencer closed, closing connection
[  13.736]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} return EOF from closing/closed connection
[  13.736]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {dst-remote=[127.0.0.1:41838] src-remote=[wttr.ziti] src-local=[:1] dst-local=[127.0.0.1:8000]} stopping pipe
[  13.736]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {src-remote=[127.0.0.1:41838] src-local=[127.0.0.1:8000] dst-local=[:1] dst-remote=[wttr.ziti]} tunnel closed: 71 bytes sent; 8852 bytes received

cd@cd-ubuntuvm:
cd@cd-ubuntuvm: curl -H &quot;Host: wttr.in&quot; http://localhost:9000
[  17.991]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: started
[  18.099]   DEBUG github.com/netfoundry/ziti-foundation/transport/tls.Dial: server provided [2] certificates
[  18.099]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: started
[  18.100]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: exited
[  18.100]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: exited
[  18.100]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxAddSinkEvent).Handle: {connId=[1]} Added sink to mux. Current sink count: 1
[  18.100]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).AddMsgSink: {connId=[1]} added to msg mux
[  18.100]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{Jn2J}]: started
[  18.100]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).txer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{Jn2J}]: started
[  18.211]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{Jn2J}]: waiter found for message. type [60784], sequence [1], replyFor [1]
[  18.211]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Connect: {connId=[1]} connected
[  18.211]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {dst-remote=[wttr.ziti] src-remote=[127.0.0.1:57980] src-local=[127.0.0.1:9000] dst-local=[:1]} tunnel started
[  18.211]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgChannel).WriteTraced: {connId=[1] type=[EdgeDataType] chSeq=[-1] edgeSeq=[1]} writing 71 bytes
[  18.211]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
[  18.379]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgEvent).Handle: {seq=[1] connId=[1]} handling received EdgeDataType
[  18.379]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} got buffer from queue 8852 bytes
[  18.379]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
Weather report: Laurelton, United States

              Overcast
      .--.     14..24 °F
  .-(    ).   ↘ 13 mph
  (___.__)__)  9 mi
              0.0 in
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Fri 14 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │     \   /     Sunny          │     \   /     Clear          │     \   /     Clear          │
│  _ /&quot;&quot;.-.     6..19 °F       │      .-.      8..21 °F       │      .-.      8..19 °F       │      .-.      3..14 °F       │
│    \_(   ).   ↘ 11-13 mph    │   ― (   ) ―   ↘ 11-13 mph    │   ― (   ) ―   ↗ 11-13 mph    │   ― (   ) ―   ↓ 8-13 mph     │
│    /(___(__)  5 mi           │      `-’      6 mi           │      `-’      6 mi           │      `-’      6 mi           │
│               0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Sat 15 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│     \   /     Sunny          │    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │
│      .-.      14..17 °F      │  _ /&quot;&quot;.-.     17..24 °F      │  _ /&quot;&quot;.-.     21..30 °F      │  _ /&quot;&quot;.-.     17..24 °F      │
│   ― (   ) ―   ↖ 3 mph        │    \_(   ).   ↑ 6-8 mph      │    \_(   ).   ↑ 9-14 mph     │    \_(   ).   ↑ 8-14 mph     │
│      `-’      6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │
│     /   \     0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Sun 16 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │    \  /       Partly cloudy  │               Overcast       │               Overcast       │
│  _ /&quot;&quot;.-.     24..30 °F      │  _ /&quot;&quot;.-.     35..39 °F      │      .--.     37..39 °F      │      .--.     32..33 °F      │
│    \_(   ).   ↗ 4-7 mph      │    \_(   ).   ↗ 7-8 mph      │   .-(    ).   → 6-9 mph      │   .-(    ).   ↗ 3-8 mph      │
│    /(___(__)  6 mi           │    /(___(__)  6 mi           │  (___.__)__)  6 mi           │  (___.__)__)  6 mi           │
│               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘

Follow @igor_chubin for wttr.in updates
[  18.379]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {dst-local=[:1] dst-remote=[wttr.ziti] src-remote=[127.0.0.1:57980] src-local=[127.0.0.1:9000]} stopping pipe
[  18.379]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: begin
[  18.379]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxRemoveSinkEvent).Handle: {connId=[1]} Removed sink from mux. Current sink count: 0
[  18.379]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).RemoveMsgSinkById: {connId=[1]} removed from msg mux
[  18.379]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: end
cd@cd-ubuntuvm: [  19.382]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} sequencer closed, closing connection
[  19.382]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} return EOF from closing/closed connection
[  19.382]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {dst-remote=[127.0.0.1:57980] src-remote=[wttr.ziti] src-local=[:1] dst-local=[127.0.0.1:9000]} stopping pipe
[  19.383]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {src-remote=[127.0.0.1:57980] src-local=[127.0.0.1:9000] dst-local=[:1] dst-remote=[wttr.ziti]} tunnel closed: 71 bytes sent; 8852 bytes received

cd@cd-ubuntuvm: killall ziti-tunnel
[  25.856]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal terminated
[  25.856]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal terminated
[  25.856]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal terminated
[  25.856]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal terminated
[  25.856]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: wttr.ziti
[  25.856]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: netcat7256
cd@cd-ubuntuvm: [  25.856]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  25.856]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  25.856]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: netcat7256
[  25.856]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: wttr.ziti
[  25.856]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  25.856]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  25.856]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Stop: stopping proxy interceptor
[  25.856]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Stop: stopping proxy interceptor
</code></pre></section>
<section id="tabpanel_VnP2eZrENS-6_verify-windows" role="tabpanel" data-tab="verify-windows" aria-hidden="true" hidden="hidden">
<pre><code>c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM the name of the ziti controller you&#39;re logging into

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET ZITI_CTRL=local-edge-controller

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM the location of the certificate(s) to use to validate the controller

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET ZITI_CTRL_CERT=c:\path\to\controller.cert

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET ZITI_USER=myUserName

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET ZITI_PWD=myPassword

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM a name for the configuration

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_NAME=yubikey_windemo

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_ROOT=c:\path\to\yubico-piv-tool-2.0.0

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM path to the pkcs11 library

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET PATH=%PATH%;%HSM_ROOT%\bin

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET PKCS11_MODULE=%HSM_ROOT%\bin\libykcs11-1.dll

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM the id of the key - you probably want to leave these alone unless you know better

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_ID1=01

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_ID2=03

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET RSA_ID=%HSM_NAME%%HSM_ID1%_rsa

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET EC_ID=%HSM_NAME%%HSM_ID2%_ec

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM the pins used when accessing the pkcs11 api

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_SOPIN=010203040506070801020304050607080102030405060708

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_PIN=123456

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_DEST=%HSM_ROOT%\%HSM_NAME%

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_LABEL=%HSM_NAME%-label

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET HSM_TOKENS_DIR=%HSM_DEST%\tokens\

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM make an alias for ease

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;doskey p=&quot;c:\Program Files\OpenSC Project\OpenSC\tools\pkcs11-tool.exe&quot; --module %PKCS11_MODULE% $*

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;cd /d %HSM_ROOT%

c:\path\to\yubico-piv-tool-2.0.0&gt;
c:\path\to\yubico-piv-tool-2.0.0&gt;rmdir /s /q %HSM_NAME%

c:\path\to\yubico-piv-tool-2.0.0&gt;mkdir %HSM_NAME%

c:\path\to\yubico-piv-tool-2.0.0&gt;
c:\path\to\yubico-piv-tool-2.0.0&gt;cd /d %HSM_NAME%

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller login %ZITI_CTRL%:1280 -u %ZITI_USER% -p %ZITI_PWD% -c %ZITI_CTRL_CERT%
Token: 2e4b9d55-fe89-4e35-8101-7d8a5f492b8b

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM create a new identity and output the jwt to a known location

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller create identity device &quot;%RSA_ID%&quot; -o &quot;%HSM_DEST%\%RSA_ID%.jwt&quot;
43b76397-c65e-43a9-a326-b58f83cacfea
Enrollment expires at 2020-02-24T14:47:02.783676578Z

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM create a second new identity and output the jwt to a known location

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller create identity device &quot;%EC_ID%&quot; -o &quot;%HSM_DEST%\%EC_ID%.jwt&quot;
fa116b87-d322-4058-a8c1-d41f21a9e051
Enrollment expires at 2020-02-24T14:47:03.521726623Z

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;p --init-token --label &quot;ziti-test-token&quot; --so-pin %HSM_SOPIN%
Using slot 0 with a present token (0x0)
Token successfully initialized

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM create a couple of keys - one rsa and one ec

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;p -k --key-type rsa:2048 --usage-sign --usage-decrypt --login --id %HSM_ID1% --login-type so --so-pin %HSM_SOPIN% --label defaultkey
Using slot 0 with a present token (0x0)
Key pair generated:
Private Key Object; RSA
  label:      Private key for PIV Authentication
  ID:         01
  Usage:      decrypt, sign
  Access:     sensitive, always sensitive, never extractable, local
Public Key Object; RSA 2048 bits
  label:      Public key for PIV Authentication
  ID:         01
  Usage:      encrypt, verify
  Access:     local

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;p -k --key-type EC:prime256v1 --usage-sign --usage-decrypt --login --id %HSM_ID2% --login-type so --so-pin %HSM_SOPIN% --label defaultkey
Using slot 0 with a present token (0x0)
Key pair generated:
Private Key Object; EC
  label:      Private key for Key Management
  ID:         03
  Usage:      decrypt, sign
  Access:     sensitive, always sensitive, never extractable, local
Public Key Object; EC  EC_POINT 256 bits
  EC_POINT:   044104c5f6b528121fbe67e44dc2f966a2df9df97d5e712e40fdf6df74ba8c166d069d0eee65886c115034821b3e3c3c890e910ffe05efc70d281e531ae8073915f579
  EC_PARAMS:  06082a8648ce3d030107
  label:      Public key for Key Management
  ID:         03
  Usage:      encrypt, verify
  Access:     local

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti-enroller -j &quot;%HSM_DEST%\%RSA_ID%.jwt&quot; -k &quot;pkcs11://%PKCS11_MODULE%?id=%HSM_ID1%&amp;pin=%HSM_PIN%&quot; -v
time=&quot;2020-02-14T09:47:46-05:00&quot; level=debug msg=&quot;jwt to parse: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbSI6Im90dCIsImV4cCI6MTU4MjU1NTYyMiwiaXNzIjoiaHR0cHM6Ly9sb2NhbC1lZGdlLWNvbnRyb2xsZXI6MTI4MCIsImp0aSI6ImYwYjIxZjQ4LTk3N2QtNDVlZi04ZDZlLWY5YzllMzlkYTg1YSIsInN1YiI6IjQzYjc2Mzk3LWM2NWUtNDNhOS1hMzI2LWI1OGY4M2NhY2ZlYSJ9.lAfmkZb_3-qPtW4hWaaHsL_7rZiHlN3LKGIrudX4K91idw5C-AdcjT-smbfSlDBqmZElU0iomrmT4TJ3SbGM9yRhrnRZBgsbC76dKO6sbNuCEGLeMJ_pJFGo7ZZC32wLm2HsvCXszwjMXOrr1ndvWUKs3KkUhvmbBEIA4x566McsngeZ5B4ILso4BmL4KJcef-n-PuI14V42n7uzOu_KZomEGSNZ34LCg0cbWcsUmoeV8d3Vgb3xSR16wyyl7tC_pGvH1qPvaWmNUQ9BWk1j730C6RXLHZ3zECOUXqIjYTOaXkoDEpuXceNF5gNm9Cx76UwpKJlSEyD_LFbkULJL4_zmKy9w9JreSUh6cnkPW7ltXluEt-Wy1VckkwOPUCRXCQ_AuxvClhOPUW_Y-PW8Qbooou7eo8v-ZPAuFqx04_DkPdhMPn2h6CyZiqEM5ZqN_ln-Q6BAUgpBHmAFUuPDnCXk0R1l74Yc23z55hrfFreR9-t4BGl6ZBiV9oAa6kz4-8MTkg_osGJOAn3S0T_mFORCES68dppVAF9Lv8kaFkZsJE3pyQeApyYqtIZWZUUiQH4S3ssFfwuoy9KmP9lvSo4Ampl7whygx6B6nf5EiSvkQyvNPSW1L5VQeI3eShQbrUHVnrBMY2BQHa86Wqz6ICdSLQHW1P_Z6yX71HKa06A&quot;
time=&quot;2020-02-14T09:47:46-05:00&quot; level=info msg=&quot;using engine : pkcs11\n&quot;
time=&quot;2020-02-14T09:47:46-05:00&quot; level=debug msg=&quot;loading key&quot; context=pkcs11 url=&quot;pkcs11://c:%5Cpath%5Cto%5Cyubico-piv-tool-2.0.0%5Cbin%5Clibykcs11-1.dll?id=01&amp;pin=123456&quot;
time=&quot;2020-02-14T09:47:46-05:00&quot; level=info msg=&quot;using driver: c:\\path\\to\\yubico-piv-tool-2.0.0\\bin\\libykcs11-1.dll&quot; context=pkcs11
time=&quot;2020-02-14T09:47:46-05:00&quot; level=warning msg=&quot;slot not specified, using first slot reported by the driver (0)&quot; context=pkcs11
time=&quot;2020-02-14T09:47:46-05:00&quot; level=debug msg=&quot;found signing mechanism&quot; context=pkcs11 sign mechanism=0
time=&quot;2020-02-14T09:47:46-05:00&quot; level=debug msg=&quot;no cas provided in caPool. using system provided cas&quot;
time=&quot;2020-02-14T09:47:46-05:00&quot; level=debug msg=&quot;fetching certificates from server&quot;
time=&quot;2020-02-14T09:47:46-05:00&quot; level=debug msg=&quot;loading key&quot; context=pkcs11 url=&quot;pkcs11://c:%5Cpath%5Cto%5Cyubico-piv-tool-2.0.0%5Cbin%5Clibykcs11-1.dll?id=01&amp;pin=123456&quot;
time=&quot;2020-02-14T09:47:46-05:00&quot; level=info msg=&quot;using driver: c:\\path\\to\\yubico-piv-tool-2.0.0\\bin\\libykcs11-1.dll&quot; context=pkcs11
time=&quot;2020-02-14T09:47:46-05:00&quot; level=warning msg=&quot;slot not specified, using first slot reported by the driver (0)&quot; context=pkcs11
time=&quot;2020-02-14T09:47:46-05:00&quot; level=debug msg=&quot;found signing mechanism&quot; context=pkcs11 sign mechanism=0
enrolled successfully. identity file written to: c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo\yubikey_windemo01_rsa.json
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti-enroller -j &quot;%HSM_DEST%\%EC_ID%.jwt&quot; -k &quot;pkcs11://%PKCS11_MODULE%?id=%HSM_ID2%&amp;pin=%HSM_PIN%&quot; -v
time=&quot;2020-02-14T09:47:47-05:00&quot; level=debug msg=&quot;jwt to parse: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbSI6Im90dCIsImV4cCI6MTU4MjU1NTYyMywiaXNzIjoiaHR0cHM6Ly9sb2NhbC1lZGdlLWNvbnRyb2xsZXI6MTI4MCIsImp0aSI6ImY1NzVkZTI0LTcyYzctNDcxZS1hMzI0LTUyMjE3ZWFlYmExNCIsInN1YiI6ImZhMTE2Yjg3LWQzMjItNDA1OC1hOGMxLWQ0MWYyMWE5ZTA1MSJ9.cMyzS7o4ou2XUN6d3C-fx6i7sleIZO5b_LeqOxBNkAZO6l7JFIAp54ak8TUYD-chsVnSZ-bYPiuO-lbPIR2UrZvN6SshOowiQpAKQPggL2y0UZJAqzRoxfzlkjBZXi5BjRSTGTW3nRd9y40AwR_aAkOr4IztYbREGBYvfTK4QX-NSVvSoGVCiBeKFC6PO_8nuAUxMgL_ODVpPVA1ThO5l6Jzut_N5LgysaxTjp8WWsAIvUIbnIxJ7y_hTvmKFQ9hbLuTLaWZ091AA-469dxzbMzQVe_xDSwpQDGfYgRm02_uRlKUlm_w_sPdytaNb54u0I0-la83r31S8ugyGz3xMD-xLDHVKwxZ7dUArQf3oKzGZNhCc6MMJQBI81jbHaeSCNlpDJugYDDG0bx1E87cU7Nt88h-jaLOwEOqozsG_4myhoFaMRGx-unNP8Lr-zlPtU3AGMTu21AvCq4CCg0HYLdKVjCkQ3m6N29wOrMgF_3G_hdvTLDTeHY2wKnJIBHg3lg106a7J6WtiM9CyS_N_01kCtwFWK49662GQPv6_IVb6eKokhtcA4-2E1F6H8v5BCUljzfjpfQ4EQds7uDtQSL3i3muBLuXkLUW86H98q8XVnQZms_41T2n6MWmo5smOYrs4--rM1R-in3lmKymd8nmmN-L2GuJF5zsRaiq0r4&quot;
time=&quot;2020-02-14T09:47:47-05:00&quot; level=info msg=&quot;using engine : pkcs11\n&quot;
time=&quot;2020-02-14T09:47:47-05:00&quot; level=debug msg=&quot;loading key&quot; context=pkcs11 url=&quot;pkcs11://c:%5Cpath%5Cto%5Cyubico-piv-tool-2.0.0%5Cbin%5Clibykcs11-1.dll?id=03&amp;pin=123456&quot;
time=&quot;2020-02-14T09:47:47-05:00&quot; level=info msg=&quot;using driver: c:\\path\\to\\yubico-piv-tool-2.0.0\\bin\\libykcs11-1.dll&quot; context=pkcs11
time=&quot;2020-02-14T09:47:47-05:00&quot; level=warning msg=&quot;slot not specified, using first slot reported by the driver (0)&quot; context=pkcs11
time=&quot;2020-02-14T09:47:48-05:00&quot; level=debug msg=&quot;found signing mechanism&quot; context=pkcs11 sign mechanism=0
time=&quot;2020-02-14T09:47:48-05:00&quot; level=debug msg=&quot;EC oid[1.2.840.10045.3.1.7], rest: [], err: &lt;nil&gt;&quot; context=pkcs11
time=&quot;2020-02-14T09:47:48-05:00&quot; level=debug msg=&quot;no cas provided in caPool. using system provided cas&quot;
time=&quot;2020-02-14T09:47:48-05:00&quot; level=debug msg=&quot;fetching certificates from server&quot;
time=&quot;2020-02-14T09:47:48-05:00&quot; level=debug msg=&quot;loading key&quot; context=pkcs11 url=&quot;pkcs11://c:%5Cpath%5Cto%5Cyubico-piv-tool-2.0.0%5Cbin%5Clibykcs11-1.dll?id=03&amp;pin=123456&quot;
time=&quot;2020-02-14T09:47:48-05:00&quot; level=info msg=&quot;using driver: c:\\path\\to\\yubico-piv-tool-2.0.0\\bin\\libykcs11-1.dll&quot; context=pkcs11
time=&quot;2020-02-14T09:47:48-05:00&quot; level=warning msg=&quot;slot not specified, using first slot reported by the driver (0)&quot; context=pkcs11
time=&quot;2020-02-14T09:47:48-05:00&quot; level=debug msg=&quot;found signing mechanism&quot; context=pkcs11 sign mechanism=0
time=&quot;2020-02-14T09:47:48-05:00&quot; level=debug msg=&quot;EC oid[1.2.840.10045.3.1.7], rest: [], err: &lt;nil&gt;&quot; context=pkcs11
enrolled successfully. identity file written to: c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo\yubikey_windemo03_ec.json
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM these two commands can&#39;t be copied and pasted - you need to get the result of the first command and use it in the next

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM run this command and get the id from the first edge-router.

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller list edge-routers
id: 0c2c2049-3577-479c-aa09-625fa0e15d31    name: local-edge-router    role attributes: {}

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM use the id returned from the above command and put it into a variable for use in a momment

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;SET EDGE_ROUTER_ID=0c2c2049-3577-479c-aa09-625fa0e15d31

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM remove/recreate the config - here we&#39;ll be instructing the tunneler to listen on localhost and port 9000

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller delete config wttrconfig

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller create config wttrconfig ziti-tunneler-client.v1 &quot;{ \&quot;hostname\&quot; : \&quot;localhost\&quot;, \&quot;port\&quot; : 9000 }&quot;
b2c7af06-072d-4ff2-9f73-8d1456a16d5a

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM recreate the service with the EDGE_ROUTER_ID from above. Here we are adding a ziti service that will

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM send a request to wttr.in to retreive a weather forecast

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller delete service wttr.ziti

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;ziti edge controller create service wttr.ziti &quot;%EDGE_ROUTER_ID%&quot; tcp://wttr.in:80 --configs wttrconfig
5a11bfce-b716-4d7a-944b-ea72e6225549

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM start one or both proxies - use ctrl-break or ctrl-pause to terminate these processes

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;start /b ziti-tunnel proxy -i &quot;%HSM_DEST%/%RSA_ID%.json&quot; wttr.ziti:8000 -v

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;start /b ziti-tunnel proxy -i &quot;%HSM_DEST%/%EC_ID%.json&quot; wttr.ziti:9000 -v

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM[   0.013]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Start: starting proxy interceptor
[   0.013]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {url=[pkcs11://c:%5Cpath%5Cto%5Cyubico-piv-tool-2.0.0%5Cbin%5Clibykcs11-1.dll?id=01&amp;pin=123456]} loading key
[   0.014]    INFO github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: using driver: c:\path\to\yubico-piv-tool-2.0.0\bin\libykcs11-1.dll
[   0.012]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Start: starting proxy interceptor
[   0.012]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {url=[pkcs11://c:%5Cpath%5Cto%5Cyubico-piv-tool-2.0.0%5Cbin%5Clibykcs11-1.dll?id=03&amp;pin=123456]} loading key
[   0.013]    INFO github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: using driver: c:\path\to\yubico-piv-tool-2.0.0\bin\libykcs11-1.dll
[   0.025] WARNING github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: slot not specified, using first slot reported by the driver (0)
[   0.195] WARNING github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: slot not specified, using first slot reported by the driver (0)
[   0.688]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {sign mechanism=[0]} found signing mechanism
[   0.689]    INFO github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: attempting to authenticate
[   0.699]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.(*engine).LoadKey [pkcs11]: {sign mechanism=[0]} found signing mechanism
[   0.699]   DEBUG github.com/netfoundry/ziti-foundation/identity/engines/pkcs11.loadECDSApub [pkcs11]: EC oid[1.2.840.10045.3.1.7], rest: [], err: &lt;nil&gt;
[   0.700]    INFO github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: attempting to authenticate
[   0.812]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: {token=[3b8bbb76-5984-495e-94cd-9752fe6a4d61] id=[55a4e9aa-eb78-4a19-a685-92aa19fd7177]} Got api session: {55a4e9aa-eb78-4a19-a685-92aa19fd7177 3b8bbb76-5984-495e-94cd-9752fe6a4d61}
[   0.813]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token 3b8bbb76-5984-495e-94cd-9752fe6a4d61
[   0.866]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token 3b8bbb76-5984-495e-94cd-9752fe6a4d61
[   0.920]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service wttr.ziti
[   0.936]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: requesting session from https://local-edge-controller:1280/sessions
[   0.939]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: {service_id=[5a11bfce-b716-4d7a-944b-ea72e6225549]} requesting session
[   0.960]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).Authenticate: {token=[79e3ef58-d712-4821-9f8b-3e2a947bd7b5] id=[4af36742-61ac-49cc-8935-08a8ab14d6c6]} Got api session: {4af36742-61ac-49cc-8935-08a8ab14d6c6 79e3ef58-d712-4821-9f8b-3e2a947bd7b5}
[   0.975]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token 79e3ef58-d712-4821-9f8b-3e2a947bd7b5
[   0.983]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {service=[wttr.ziti] id=[9eb75dd2-88df-4b6c-8a1e-f9d1a6e15adc]} acquired network session
[   0.984]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service netcat7256
[   1.002]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).handleTCP: {service=[wttr.ziti] addr=[0.0.0.0:9000]} service is listening
[   1.003]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {service=[netcat7256]} service netcat7256 was not specified at initialization. not intercepting
[   1.023]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getServices: using api session token 79e3ef58-d712-4821-9f8b-3e2a947bd7b5
[   1.071]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service wttr.ziti
[   1.071]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: requesting session from https://local-edge-controller:1280/sessions
[   1.072]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti.(*contextImpl).getSession: {service_id=[5a11bfce-b716-4d7a-944b-ea72e6225549]} requesting session
[   1.102]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {service=[wttr.ziti] id=[5589a3dc-0301-4563-bf65-cf1143f9db3b]} acquired network session
[   1.102]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: starting tunnel for newly available service netcat7256
[   1.103]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.interceptor.Intercept: {service=[netcat7256]} service netcat7256 was not specified at initialization. not intercepting
[   1.104]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).handleTCP: {service=[wttr.ziti] addr=[0.0.0.0:8000]} service is listening
use a browser - or curl to verify the ziti tunneler is listening locally and the traffic has flowed over the ziti network

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;curl -H &quot;Host: wttr.in&quot; http://localhost:8000 &gt; &quot;%HSM_DEST%\example_%RSA_ID%.txt&quot;
[   7.803]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: started
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[   7.948]   DEBUG github.com/netfoundry/ziti-foundation/transport/tls.Dial: server provided [2] certificates
[   7.948]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: started
[   7.949]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: exited
[   7.950]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: exited
[   7.950]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxAddSinkEvent).Handle: {connId=[1]} Added sink to mux. Current sink count: 1
[   7.950]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{nJXo}]: started
[   7.951]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).txer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{nJXo}]: started
[   7.951]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).AddMsgSink: {connId=[1]} added to msg mux
[   8.082]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{nJXo}]: waiter found for message. type [60784], sequence [1], replyFor [1]
[   8.082]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Connect: {connId=[1]} connected
[   8.083]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {src-local=[127.0.0.1:8000] dst-local=[:1] dst-remote=[wttr.ziti] src-remote=[127.0.0.1:52952]} tunnel started
[   8.084]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
[   8.085]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgChannel).WriteTraced: {edgeSeq=[1] connId=[1] type=[EdgeDataType] chSeq=[-1]} writing 71 bytes
[   8.252]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgEvent).Handle: {seq=[1] connId=[1]} handling received EdgeDataType
[   8.252]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} got buffer from queue 8852 bytes
[   8.255]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
100  8687  100  8687    0     0  18522      0 --:--:-- --:--:-- --:--:-- 18522
[   8.269]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {dst-local=[:1] dst-remote=[wttr.ziti] src-remote=[127.0.0.1:52952] src-local=[127.0.0.1:8000]} stopping pipe
[   8.269]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: begin
[   8.270]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxRemoveSinkEvent).Handle: {connId=[1]} Removed sink from mux. Current sink count: 0
[   8.271]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).RemoveMsgSinkById: {connId=[1]} removed from msg mux
[   8.273]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: end

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;curl -H &quot;Host: wttr.in&quot; http://localhost:9000 &gt; &quot;%HSM_DEST%\example_%EC_ID%.txt&quot;
[   8.298]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: started
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[   8.379]   DEBUG github.com/netfoundry/ziti-foundation/transport/tls.Dial: server provided [2] certificates
[   8.379]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: started
[   8.380]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).sendHello [u{classic}-&gt;i{}]: exited
[   8.381]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*classicDialer).Create [tls:local-edge-router:3022]: exited
[   8.381]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{oWqn}]: started
[   8.383]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).txer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{oWqn}]: started
[   8.384]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxAddSinkEvent).Handle: {connId=[1]} Added sink to mux. Current sink count: 1
[   8.385]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).AddMsgSink: {connId=[1]} added to msg mux
[   8.495]   DEBUG github.com/netfoundry/ziti-foundation/channel2.(*channelImpl).rxer [ch{ziti-sdk}-&gt;u{classic}-&gt;i{oWqn}]: waiter found for message. type [60784], sequence [1], replyFor [1]
[   8.495]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Connect: {connId=[1]} connected
[   8.495]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {src-remote=[127.0.0.1:52954] src-local=[127.0.0.1:9000] dst-local=[:1] dst-remote=[wttr.ziti]} tunnel started
[   8.496]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgChannel).WriteTraced: {connId=[1] type=[EdgeDataType] chSeq=[-1] edgeSeq=[1]} writing 71 bytes
[   8.496]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
[   8.665]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgEvent).Handle: {seq=[1] connId=[1]} handling received EdgeDataType
[   8.666]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} got buffer from queue 8852 bytes
[   8.667]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} read buffer = 32768 bytes
100  8687  100  8687    0     0  23165      0 --:--:-- --:--:-- --:--:-- 24130
[   8.674]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {src-remote=[127.0.0.1:52954] src-local=[127.0.0.1:9000] dst-local=[:1] dst-remote=[wttr.ziti]} stopping pipe
[   8.674]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: begin
[   8.675]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*muxRemoveSinkEvent).Handle: {connId=[1]} Removed sink from mux. Current sink count: 0
[   8.675]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/edge.(*MsgMux).RemoveMsgSinkById: {connId=[1]} removed from msg mux
[   8.676]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Close: {connId=[1]} close: end

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;[   9.271]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} sequencer closed, closing connection
[   9.271]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} return EOF from closing/closed connection
[   9.271]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {src-remote=[wttr.ziti] src-local=[:1] dst-local=[127.0.0.1:8000] dst-remote=[127.0.0.1:52952]} stopping pipe
[   9.271]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {src-local=[127.0.0.1:8000] dst-local=[:1] dst-remote=[wttr.ziti] src-remote=[127.0.0.1:52952]} tunnel closed: 71 bytes sent; 8852 bytes received
[   9.676]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} sequencer closed, closing connection
[   9.676]   DEBUG github.com/netfoundry/ziti-sdk-golang/ziti/internal/edge_impl.(*edgeConn).Read: {connId=[1]} return EOF from closing/closed connection
[   9.676]    INFO github.com/netfoundry/ziti-edge/tunnel.myCopy: {src-remote=[wttr.ziti] src-local=[:1] dst-local=[127.0.0.1:9000] dst-remote=[127.0.0.1:52954]} stopping pipe
[   9.677]    INFO github.com/netfoundry/ziti-edge/tunnel.Run: {src-remote=[127.0.0.1:52954] src-local=[127.0.0.1:9000] dst-local=[:1] dst-remote=[wttr.ziti]} tunnel closed: 71 bytes sent; 8852 bytes received
REM set the codepage for the cmd prompt so that the output looks nice

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;chcp 65001
Active code page: 65001

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM show the results in the console

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;type &quot;%HSM_DEST%\example_%RSA_ID%.txt&quot;
Weather report: Laurelton, United States

              Overcast
      .--.     14..24 °F
  .-(    ).   ↘ 13 mph
  (___.__)__)  9 mi
              0.0 in
                                                      ┌─────────────┐
┌─────────────���────────────────┬───────────────────────┤  Fri 14 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├────────────��─────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │     \   /     Sunny          │     \   /     Clear          │     \   /     Clear          │
│  _ /&quot;&quot;.-.     6..19 °F       │      .-.      8..21 °F       │      .-.      8..19 °F       │      .-.      3..14 °F       │
│    \_(   ).   ↘ 11-13 mph    │   ― (   ) ―   �� 11-13 mph    │   ― (   ) ―   ↗ 11-13 mph    │   ― (   ) ―   ↓ 8-13 mph     │
│    /(___(__)  5 mi           │      `-’      6 mi           │      `-’      6 mi           │      `-’      6 mi           │
│               0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────���───────┘
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Sat 15 Feb ├───────────────────────┬────────────────────────���─────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│     \   /     Sunny          │    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │
│      .-.      14..17 °F      │  _ /&quot;&quot;.-.     17..24 °F      │  _ /&quot;&quot;.-.     21..30 °F      │  _ /&quot;&quot;.-.     17..24 °F      │
│   ― (   ) ―   ↖ 3 mph        │    \_(   ).   ↑ 6-8 mph      │    \_(   ).   ↑ 9-14 mph     │    \_(   ).   ↑ 8-14 mph     │
│      `-’      6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │
│     /   \     0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
                                                      ┌─────────────┐
┌──────────────────────────────���───────────────────────┤  Sun 16 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├─────────────────────────────��┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │    \  /       Partly cloudy  │               Overcast       │               Overcast       │
│  _ /&quot;&quot;.-.     24..30 °F      │  _ /&quot;&quot;.-.     35..39 °F      │      .--.     37..39 °F      │      .--.     32..33 °F      │
│    \_(   ).   ↗ 4-7 mph      │    \_(   ).   ↗ 7-8 mph      │   .-(    ).   → 6-9 mph      │   .-(    ).   ↗ 3-8 mph      │
│    /(___(__)  6 mi           │    /(___(__)  6 mi           │  (___.__)__)  6 mi           │  (___.__)__)  6 mi           │
│               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘

Follow @igor_chubin for wttr.in updates

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;type &quot;%HSM_DEST%\example_%EC_ID%.txt&quot;
Weather report: Laurelton, United States

              Overcast
      .--.     14..24 °F
  .-(    ).   ↘ 13 mph
  (___.__)__)  9 mi
              0.0 in
                                                      ┌─────────────┐
┌─────────────���────────────────┬───────────────────────┤  Fri 14 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├────────────��─────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │     \   /     Sunny          │     \   /     Clear          │     \   /     Clear          │
│  _ /&quot;&quot;.-.     6..19 °F       │      .-.      8..21 °F       │      .-.      8..19 °F       │      .-.      3..14 °F       │
│    \_(   ).   ↘ 11-13 mph    │   ― (   ) ―   �� 11-13 mph    │   ― (   ) ―   ↗ 11-13 mph    │   ― (   ) ―   ↓ 8-13 mph     │
│    /(___(__)  5 mi           │      `-’      6 mi           │      `-’      6 mi           │      `-’      6 mi           │
│               0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │     /   \     0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────���───────┘
                                                      ┌─────────────┐
┌──────────────────────────────┬───────────────────────┤  Sat 15 Feb ├───────────────────────┬────────────────────────���─────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│     \   /     Sunny          │    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │
│      .-.      14..17 °F      │  _ /&quot;&quot;.-.     17..24 °F      │  _ /&quot;&quot;.-.     21..30 °F      │  _ /&quot;&quot;.-.     17..24 °F      │
│   ― (   ) ―   ↖ 3 mph        │    \_(   ).   ↑ 6-8 mph      │    \_(   ).   ↑ 9-14 mph     │    \_(   ).   ↑ 8-14 mph     │
│      `-’      6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │    /(___(__)  6 mi           │
│     /   \     0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
                                                      ┌─────────────┐
┌──────────────────────────────���───────────────────────┤  Sun 16 Feb ├───────────────────────┬──────────────────────────────┐
│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
├─────────────────────────────��┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
│    \  /       Partly cloudy  │    \  /       Partly cloudy  │               Overcast       │               Overcast       │
│  _ /&quot;&quot;.-.     24..30 °F      │  _ /&quot;&quot;.-.     35..39 °F      │      .--.     37..39 °F      │      .--.     32..33 °F      │
│    \_(   ).   ↗ 4-7 mph      │    \_(   ).   ↗ 7-8 mph      │   .-(    ).   → 6-9 mph      │   .-(    ).   ↗ 3-8 mph      │
│    /(___(__)  6 mi           │    /(___(__)  6 mi           │  (___.__)__)  6 mi           │  (___.__)__)  6 mi           │
│               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘

Follow @igor_chubin for wttr.in updates

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;REM ctrl-break or ctrl-pause to kill the tunnelers

c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;

[  39.022]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal interrupt
[  39.015]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal interrupt
c:\path\to\yubico-piv-tool-2.0.0\yubikey_windemo&gt;[  39.023]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal interrupt
[  39.017]   DEBUG github.com/netfoundry/ziti-edge/tunnel/intercept.ServicePoller: caught signal interrupt
[  39.025]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: wttr.ziti
[  39.018]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: wttr.ziti
[  39.025]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  39.019]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  39.026]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: netcat7256
[  39.020]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: stopping tunnel for unavailable service: netcat7256
[  39.027]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  39.020]   ERROR github.com/netfoundry/ziti-edge/tunnel/intercept.updateServices: failed to stop intercepting: StopIntercepting not implemented by proxy interceptor
[  39.028]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Stop: stopping proxy interceptor
[  39.021]    INFO github.com/netfoundry/ziti-edge/tunnel/intercept/proxy.(*interceptor).Stop: stopping proxy interceptor
REM set the codepage for the cmd prompt so that the output looks nice
</code></pre></section>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/netfoundry/ziti-doc/blob/master/docfx_project/ziti/quickstarts/hsm/yubikey.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span class='pull-left'><span><a href='https://netfoundry.io'>© 2019 NetFoundry</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/privacy-policy'>Privacy Policy</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/legal-items'>Legal</a></span>&nbsp;&nbsp;<span><a href='https://netfoundry.zendesk.com/hc/en-us'>Support</a></span>&nbsp;&nbsp;</span><span class='pull-right'><span><a href='https://www.facebook.com/NetFoundry/' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/145/145802.svg'></a></span>&nbsp;<span><a href='https://twitter.com/netfoundry' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/145/145812.svg'></a></span>&nbsp;<span><a href='https://www.linkedin.com/company/netfoundry/' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/145/145807.svg'></a></span>&nbsp;<span><a href='https://www.youtube.com/channel/UCGN6PFj1rZu50yme9YsICmg' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/174/174883.svg'></a></span>&nbsp;&nbsp;&nbsp;</span><br>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
