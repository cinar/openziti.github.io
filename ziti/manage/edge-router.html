<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Edge Router | NetFoundry Ziti </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Edge Router | NetFoundry Ziti ">
    <meta name="generator" content="docfx 2.x">
    
    <link rel="shortcut icon" href="../../images/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
    <!--span>this is text</span-->
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/nflightbglogo_40.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div style="display: flex;">
                    <div class="form-group" style="valign: center;position: relative;">
                      <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                    </div>
                    <div style="position: relative">
                        &nbsp;
                    </div>
                    <div style="position: relative">
                        <a href="https://github.com/netfoundry">
                            <img src="../../images/github-white.svg" alt="view us on github" title="view us on github" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://netfoundry.discourse.group">
                            <img src="../../images/discourse_icon_halo.svg" alt="Start a conversation on Discourse" title="Start a conversation on Discourse" height="34px">
                        </a>
                    </div>
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="edge-router">Edge Router</h1>

<p>The Edge Router is the entry point for Ziti-based clients. It is responsible for authenticating incoming connections by
verifying the connecting client has a valid network session.  It also routes traffic to whatever the
destination is for the given service. In simple deployments - a single edge router might be deployed. This is the case
with the <a href="../quickstarts/networks-overview.html">Ziti Edge - Developer Edition</a>. In the coming months it will be
possible to produce complicated deployments having multiple Edge Routers deployed in a myriad of locations.</p>
<h2 id="sizing-guidelines">Sizing Guidelines</h2>
<p>The Ziti Controller and Ziti Routers are still in the process of being stress tested. We recommend starting with a small
scale deployment until key performance indicators start to hint that the server requires more resources. A Ziti network
will have two important metrics: CPU and network capacity.  Modest sized networks require minimal investments in
infrastructure. Start with small machines and increase as needed.</p>
<h2 id="configuration">Configuration</h2>
<p>The Edge Router is configured using a <a href="https://yaml.org/">yaml</a> file. An example configuration file can be found
<a href="sample-edge-router-config.yaml">here</a>. Each section is annotated and should provide enough
information to modify a given setting. Most of the fields are straight-forward.</p>
<h3 id="edge-router-identity">Edge Router Identity</h3>
<p>The pki-related fields in the <code>identity</code> section are important to understand and pay particular attention to. The
files specified here are generated durring the process of <a href="#enrollment">enrolling</a> the edge router. As is also stated in the
configuration file these files do not need to exist before enrollment. These files will be written to during the
enrollment process. This means the process running the enrollment will need the correct privledges grated to it in order
to write - or overwrite those files.  If the key specified in the identity section already exists - it will not be
overwritten. Instead it will be used during the enrollment process.</p>
<h2 id="logging">Logging</h2>
<p>The Ziti components log all output to standard output. Logging to standard out, instead of to configurable files, etc.,
is a &quot;lighter&quot; approach to logging that is more easily integrated into more different kinds of environments. Logging to
files and implementing feautres like file rotation is a solved problem and not one that the Ziti components try to
solve.  Instead look to alternatives which are capable of watching standard out and aggregating the results for you.
There are many solutions available to collect, aggregate and display logs. Search for and implement a solution that
works for you and your needs.</p>
<h3 id="log-format">Log Format</h3>
<p>The output from Ziti components comes in three distinct styles.  Choose the style of logging that is right for you.</p>
<ol>
<li><code>pfxlog</code> - a human-readible format leveraging ascii escape codes to display colorized log level</li>
<li><code>json</code>   - a machine-readible format targetting automated processes for log aggregation/searching</li>
<li><code>text</code>   - a human-readible format using plain text (no ascii escape codes)</li>
</ol>
<h3 id="log-levels">Log Levels</h3>
<p>By default the Ziti components will log at the INFO level. This means that log messages INFO, WARNING, ERROR and FATAL
will all be captured and output.  Ziti components all support verbose logging by adding <code>--verbose</code> or <code>-v</code> to the
command being executed.  Verbose mode will add DEBUG log messages and as the name implies this log level is much more
verbose. Often when debugging adding verbose mode will aid in identifying issues.</p>
<h2 id="enrollment">Enrollment</h2>
<p>Enrollment is the process of securely generating information used to identify a given client. All endpoints need to be
enrolled in one way or another. The Edge Router is a client of a Ziti Network and thus it too must be enrolled before it
will be able to participate in a Ziti network.  An Edge Router is enrolled using the <code>ziti-router enroll</code> command and
sub-command.</p>
<h3 id="running-ziti-router-enroll">Running ziti-router enroll</h3>
<p>In order to enroll the Edge Router a valid <a href="#configuration">configuration</a> file is needed. After creating a valid
configuration the jwt for the Edge Router also needs to be obtained from the Ziti Controller. The jwt can be
retrieved from the Ziti Controller via the Ziti Controller&#39;s REST API at
https://${controller-name}:${controller-port}/edge-routers.</p>
<p>With a valid configuration file and jwt the router can now be enrolled using:
 <code>ziti-router enroller [path to configuration file] --jwt [path to jwt]</code>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/netfoundry/ziti-doc/blob/master/docfx_project/ziti/manage/edge-router.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span class='pull-left'><span><a href='https://netfoundry.io'>© 2019 NetFoundry</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/privacy-policy'>Privacy Policy</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/legal-items'>Legal</a></span>&nbsp;&nbsp;<span><a href='https://netfoundry.zendesk.com/hc/en-us'>Support</a></span>&nbsp;&nbsp;</span><span class='pull-right'><span><a href='https://www.facebook.com/NetFoundry/' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/145/145802.svg'></a></span>&nbsp;<span><a href='https://twitter.com/netfoundry' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/145/145812.svg'></a></span>&nbsp;<span><a href='https://www.linkedin.com/company/netfoundry/' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/145/145807.svg'></a></span>&nbsp;<span><a href='https://www.youtube.com/channel/UCGN6PFj1rZu50yme9YsICmg' target='_blank'><img height='25' src='https://image.flaticon.com/icons/svg/174/174883.svg'></a></span>&nbsp;&nbsp;&nbsp;</span><br>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
