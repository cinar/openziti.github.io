<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Metrics | Ziti </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Metrics | Ziti ">
    <meta name="generator" content="docfx 2.x">
    
    <link rel="shortcut icon" href="../../images/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
    <!--span>this is text</span-->
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;0,700;1,400&amp;display=swap" rel="stylesheet">
    <meta name="google-site-verification" content="jfzf3259Xh6i82RehhnKg4aAsHd02v1MB-jP43wEqHI">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-THVRRJ3GLE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'G-THVRRJ3GLE');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/ziti-logo-40.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div style="display: flex;">
                    <div class="form-group" style="valign: center;position: relative;">
                      <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                    </div>
                    <div style="position: relative">
                        &nbsp;
                    </div>
                    <div style="position: relative">
                        <a href="https://github.com/openziti">
                            <img src="../../images/github-white.svg" alt="Star us on GitHub" title="Star us on GitHub" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://openziti.discourse.group">
                            <img src="../../images/discourse_icon_halo.svg" alt="Start a conversation on Discourse" title="Start a conversation on Discourse" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://twitter.com/openziti">
                            <img src="../../images/twit.svg" alt="Follow us on Twitter" title="Follow us on Twitter" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://www.youtube.com/channel/UCAsrfQasdZmp2Gq07Ej_5cQ">
                            <img src="../../images/yt.svg" alt="Watch videos about OpenZiti" title="Watch videos about OpenZiti" height="34px">
                        </a>
                    </div>
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default" name="new">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
          <div style="display:flex; align-items: center; justify-content: center; flex-direction:row; position: relative; width: 100%; text-align: center;     background: rgb(0,104,247);
            background: linear-gradient(90deg, rgba(0,104,247,1) 0%, rgba(222,14,91,1) 100%);">
            <span style="margin-top: 5px; color: white; margin-right: 10px; height:25px">Star us on GitHub</span>
            <span style="margin-top: 5px;"><a class="github-button" href="https://github.com/openziti/ziti" data-icon="octicon-star" data-show-count="true" aria-label="Star openziti/ziti on GitHub">Star</a></span>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="metrics">Metrics</h1>

<p>OpenZiti systems provide a wide range of metrics for the monitoring of the network services, endpoints, and processes.  Some of the various metrics are visualized below to understand where they fall and what they measure in a network instance.  The bulk of the remaining metrics are measuring processes within the control plane, rather than network operation.</p>
<p><img src="MetricsReference.png" alt="Metrics Reference Iamge"></p>
<h2 id="available-metrics">Available Metrics</h2>
<p>Metrics are reported to the log files, locale in /var/log/ziti by default.  There are 2 primary log files for metrics, utilization-metrics.log and utilization-usage.log.  These logs may be shipped to various reporting systems for easier visibility and monitoring.</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Type</th>
<th>Source</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>api-session.create</td>
<td>Histogram</td>
<td>controller</td>
<td>Time to create api sessions</td>
</tr>
<tr>
<td>api.session.enforcer.run</td>
<td>Timer</td>
<td>controller</td>
<td>How long it takes the api session policy enforcer to run</td>
</tr>
<tr>
<td>bolt.open_read_txs</td>
<td>Gauge</td>
<td>controller</td>
<td>Current number of open bbolt read transactions</td>
</tr>
<tr>
<td>ctrl.latency</td>
<td>Histogram</td>
<td>controller</td>
<td>Per control channel latency</td>
</tr>
<tr>
<td>ctrl.queue_time</td>
<td>Histogram</td>
<td>controller</td>
<td>Per control channel queue time (between send and write to wire)</td>
</tr>
<tr>
<td>ctrl.rx.bytesrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per control channel receive data rate</td>
</tr>
<tr>
<td>ctrl.rx.msgrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per control channel receive message rate</td>
</tr>
<tr>
<td>ctrl.rx.msgsize</td>
<td>Histogram</td>
<td>controller</td>
<td>Per control channel receive message size distribution</td>
</tr>
<tr>
<td>ctrl.tx.bytesrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per control channel send data rate</td>
</tr>
<tr>
<td>ctrl.tx.msgrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per control channel send message rate</td>
</tr>
<tr>
<td>ctrl.tx.msgsize</td>
<td>Histogram</td>
<td>controller</td>
<td>Per control channel send messsage size distribution</td>
</tr>
<tr>
<td>edge.invalid_api_tokens</td>
<td>Meter</td>
<td>router</td>
<td>Number of invalid api session token encountered</td>
</tr>
<tr>
<td>edge.invalid_api_tokens_during_sync</td>
<td>Meter</td>
<td>router</td>
<td>Number of invalid api session token encountered while a sync is in progress</td>
</tr>
<tr>
<td>egress.rx.bytesrate</td>
<td>Meter</td>
<td>router</td>
<td>Data rate of data received via xgress, originating from terminators. Per router.</td>
</tr>
<tr>
<td>egress.rx.msgrate</td>
<td>Meter</td>
<td>router</td>
<td>Message rate of data received via xgress, originating from terminators. Per router.</td>
</tr>
<tr>
<td>egress.rx.msgsize</td>
<td>Histogram</td>
<td>router</td>
<td>Message size distribution of data received via xgress, originating from terminators. Per router.</td>
</tr>
<tr>
<td>egress.tx.bytesrate</td>
<td>Meter</td>
<td>router</td>
<td>Data rate of data sent via xgress originating from terminators. Per router.</td>
</tr>
<tr>
<td>egress.tx.msgrate</td>
<td>Meter</td>
<td>router</td>
<td>Message rate of data sent via xgress originating from terminators. Per router.</td>
</tr>
<tr>
<td>egress.tx.msgsize</td>
<td>Histogram</td>
<td>router</td>
<td>Message size distribution of data sent via xgress, originating from terminators. Per router.</td>
</tr>
<tr>
<td>eventual.events</td>
<td>Gauge</td>
<td>controller</td>
<td>Number of background events pending processing</td>
</tr>
<tr>
<td>fabric.rx.bytesrate</td>
<td>Meter</td>
<td>router</td>
<td>Data rate of data received from fabric links</td>
</tr>
<tr>
<td>fabric.rx.msgrate</td>
<td>Meter</td>
<td>router</td>
<td>Message rate of data received from fabric links</td>
</tr>
<tr>
<td>fabric.rx.msgsize</td>
<td>Histogram</td>
<td>router</td>
<td>Message size distribution of data received from fabric links</td>
</tr>
<tr>
<td>fabric.tx.bytesrate</td>
<td>Meter</td>
<td>router</td>
<td>Data rate of data sent on fabric links</td>
</tr>
<tr>
<td>fabric.tx.msgrate</td>
<td>Meter</td>
<td>router</td>
<td>Message rate of data sent on fabric links</td>
</tr>
<tr>
<td>fabric.tx.msgsize</td>
<td>Histogram</td>
<td>router</td>
<td>Message size distribution of data sent on fabric links</td>
</tr>
<tr>
<td>identity.refresh</td>
<td>Meter</td>
<td>controller</td>
<td>How often an identity is marked, indicating that they need a full refresh of their service list</td>
</tr>
<tr>
<td>identity.update-sdk-info</td>
<td>Histogram</td>
<td>controller</td>
<td>Time to update identity sdk info</td>
</tr>
<tr>
<td>ingress.rx.bytesrate</td>
<td>Meter</td>
<td>router</td>
<td>Data rate of data received via xgress, originating from initiators. Per router.</td>
</tr>
<tr>
<td>ingress.rx.msgrate</td>
<td>Meter</td>
<td>router</td>
<td>Message rate of data received via xgress, originating from initiators. Per router.</td>
</tr>
<tr>
<td>ingress.rx.msgsize</td>
<td>Histogram</td>
<td>router</td>
<td>Message size distribution of data received via xgress, originating from initiators. Per router.</td>
</tr>
<tr>
<td>ingress.tx.bytesrate</td>
<td>Meter</td>
<td>router</td>
<td>Data rate of data sent via xgress originating from initiators. Per router.</td>
</tr>
<tr>
<td>ingress.tx.msgrate</td>
<td>Meter</td>
<td>router</td>
<td>Message rate of data sent via xgress originating from initiators. Per router.</td>
</tr>
<tr>
<td>ingress.tx.msgsize</td>
<td>Histogram</td>
<td>router</td>
<td>Message size distribution of data sent via xgress, originating from initiators. Per router.</td>
</tr>
<tr>
<td>link.latency</td>
<td>Histogram</td>
<td>controller</td>
<td>Per link latency in nanoseconds</td>
</tr>
<tr>
<td>link.queue_time</td>
<td>Histogram</td>
<td>controller</td>
<td>Per link queue time (between send and write to wire)</td>
</tr>
<tr>
<td>link.rx.bytesrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per link receive data rate</td>
</tr>
<tr>
<td>link.rx.msgrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per link receive message rate</td>
</tr>
<tr>
<td>link.rx.msgsize</td>
<td>Histogram</td>
<td>controller</td>
<td>Per link receive message size distribution</td>
</tr>
<tr>
<td>link.tx.bytesrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per link send data rate</td>
</tr>
<tr>
<td>link.tx.msgrate</td>
<td>Meter</td>
<td>controller</td>
<td>Per link send message rate</td>
</tr>
<tr>
<td>link.tx.msgsize</td>
<td>Histogram</td>
<td>controller</td>
<td>Per link send messsage size distribution</td>
</tr>
<tr>
<td>service.policy.enforcer.run</td>
<td>Timer</td>
<td>controller</td>
<td>How long it takes the service policy enforcer to run</td>
</tr>
<tr>
<td>service.policy.enforcer.run.deletes</td>
<td>Meter</td>
<td>controller</td>
<td>How many sessions are deleted by the service policy enforcer</td>
</tr>
<tr>
<td>services.list</td>
<td>Histogram</td>
<td>controller</td>
<td>Time to list services</td>
</tr>
<tr>
<td>session.create</td>
<td>Histogram</td>
<td>controller</td>
<td>Time to create a session</td>
</tr>
<tr>
<td>xgress.ack_duplicates</td>
<td>Meter</td>
<td>router</td>
<td>Number of duplicate acks received. Indicates over-eager retransmission</td>
</tr>
<tr>
<td>xgress.ack_failures</td>
<td>Meter</td>
<td>router</td>
<td>Number of failures sending acks</td>
</tr>
<tr>
<td>xgress.acks.queue_size</td>
<td>Gauge</td>
<td>router</td>
<td>Number of acks queued to send</td>
</tr>
<tr>
<td>xgress.blocked_by_local_window</td>
<td>Gauge</td>
<td>router</td>
<td>Number of xgress instances blocked because the windowing threshold has been exceeded locally</td>
</tr>
<tr>
<td>xgress.blocked_by_remote_window</td>
<td>Gauge</td>
<td>router</td>
<td>Number of xgress instances blocked because the windowing threshold has been exceeded remotely</td>
</tr>
<tr>
<td>xgress.dropped_payloads</td>
<td>Meter</td>
<td>router</td>
<td>Number of payloads dropped because the xgress receiver side couldn&#39;t keep up</td>
</tr>
<tr>
<td>xgress.retransmission_failures</td>
<td>Meter</td>
<td>router</td>
<td>Number of retransmission send failures</td>
</tr>
<tr>
<td>xgress.retransmissions</td>
<td>Meter</td>
<td>router</td>
<td>Number of payloads retransmitted</td>
</tr>
<tr>
<td>xgress.retransmits.queue_size</td>
<td>Gauge</td>
<td>router</td>
<td>Number of payloads queued for retransmission</td>
</tr>
<tr>
<td>xgress.rx.acks</td>
<td>Meter</td>
<td>router</td>
<td>Number of acks received</td>
</tr>
<tr>
<td>xgress.tx.acks</td>
<td>Meter</td>
<td>router</td>
<td>Number of acks sent</td>
</tr>
<tr>
<td>xgress.tx_unacked_payload_bytes</td>
<td>Gauge</td>
<td>router</td>
<td>Total payload data size that has been buffered but not acked yet</td>
</tr>
<tr>
<td>xgress.tx_unacked_payloads</td>
<td>Gauge</td>
<td>router</td>
<td>Number of payload messages that have been buffered but not yet acked</td>
</tr>
<tr>
<td>xgress.tx_write_time</td>
<td>Timer</td>
<td>router</td>
<td>Time to write payloads to the xgress receiver</td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/openziti/ziti-doc/blob/master/docfx_project/ziti/metrics/metrics.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span class='pull-left'><span><a href='https://netfoundry.io'>©NetFoundry Inc.</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/privacy-policy'>Privacy Policy</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/legal-items'>Legal</a></span>&nbsp;&nbsp;<span><a href='https://netfoundry.zendesk.com/hc/en-us'>Support</a></span>&nbsp;&nbsp;</span><span class='pull-right'><span><a href='https://www.facebook.com/NetFoundry/' target='_blank'><img height='25' src='/images/fb.svg'></a></span>&nbsp;<span><a href='https://twitter.com/openziti' target='_blank'><img height='25' src='/images/twit.svg'></a></span>&nbsp;<span><a href='https://www.linkedin.com/company/netfoundry/' target='_blank'><img height='25' src='/images/li.svg'></a></span>&nbsp;<span><a href='https://www.youtube.com/channel/UCAsrfQasdZmp2Gq07Ej_5cQ' target='_blank'><img height='25' src='/images/yt.svg'></a></span>&nbsp;&nbsp;&nbsp;</span><br>
<!-- Place this tag in your head or just before your close body tag. -->
<script async="" defer="" src="https://buttons.github.io/buttons.js"></script>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
