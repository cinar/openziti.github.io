<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Identities | Ziti </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Identities | Ziti ">
    <meta name="generator" content="docfx 2.x">
    
    <link rel="shortcut icon" href="../../../images/favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
    <!--span>this is text</span-->
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;0,700;1,400&amp;display=swap" rel="stylesheet">
    <meta name="google-site-verification" content="jfzf3259Xh6i82RehhnKg4aAsHd02v1MB-jP43wEqHI">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-THVRRJ3GLE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'G-THVRRJ3GLE');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../images/ziti-logo-40.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div style="display: flex;">
                    <div class="form-group" style="valign: center;position: relative;">
                      <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                    </div>
                    <div style="position: relative">
                        &nbsp;
                    </div>
                    <div style="position: relative">
                        <a href="https://github.com/openziti">
                            <img src="../../../images/github-white.svg" alt="Star us on GitHub" title="Star us on GitHub" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://openziti.discourse.group">
                            <img src="../../../images/discourse_icon_halo.svg" alt="Start a conversation on Discourse" title="Start a conversation on Discourse" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://twitter.com/openziti">
                            <img src="../../../images/twit.svg" alt="Follow us on Twitter" title="Follow us on Twitter" height="34px">
                        </a>
                    </div>
                    <div style="position: relative">
                        <a href="https://www.youtube.com/channel/UCAsrfQasdZmp2Gq07Ej_5cQ">
                            <img src="../../../images/yt.svg" alt="Watch videos about OpenZiti" title="Watch videos about OpenZiti" height="34px">
                        </a>
                    </div>
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default" name="new">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
          <div style="display:flex; align-items: center; justify-content: center; flex-direction:row; position: relative; width: 100%; text-align: center;     background: rgb(0,104,247);
            background: linear-gradient(90deg, rgba(0,104,247,1) 0%, rgba(222,14,91,1) 100%);">
            <span style="margin-top: 5px; color: white; margin-right: 10px; height:25px">Star us on GitHub</span>
            <span style="margin-top: 5px;"><a class="github-button" href="https://github.com/openziti/ziti" data-icon="octicon-star" data-show-count="true" aria-label="Star openziti/ziti on GitHub">Star</a></span>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="identities">Identities</h1>

<p>Ziti Edge defines a top level entity called an Identity. An Identity is a security principal that can bind (host) or
dial (connect) to services over a Ziti Network. An Identity may be a human who uses one or more devices, a device
itself, a single account on a multi-user device, an application, or a set of applications. What determines what an
Identity is only limited by the intent of its use, its security configuration, and where/how it stores its credentials.</p>
<p>If an Identity represents a human that is using an SSO provider that ties into Ziti Edge&#39;s
<a href="external-jwt-signers.html">External JWT Signers</a> the human operator can move from device to device using whichever Ziti
enabled applications that allow them to authenticate. If the Identity can only authenticate via a x509 Client
Certificate where the private key is stored in a hardware back keystore on a device, such that the key can not be moved,
the identity is tied to that hardware. Further if the Identity&#39;s credentials are stored in an OS-backed user specific
storage mechanism (e.g. Windows Credential Manager) it is that accounts Identity.</p>
<h2 id="identity-er-diagram">Identity ER Diagram</h2>
<p>Below is a diagram that show the high-level relationships between an Identity and various important entities and within
a Ziti Network. This diagram does not show all entities, simply the ones tied closest to an Identity. For example,
the Role Attributes on an Identity are used by selectors defined on policies to act on the identity. However, the 
policies and selectors are not modeled here.</p>
<p><a href="https://mermaid.live/edit#pako:eNqVkcFuwjAMhl8l8pnwALlVwCQO06rBMZfQuBCtTabEOVQN746rFa3bBNJ8sv98jn_ZIzTBIijAuHXmHE2vveDYW_TkaBClrNdhFFW9lwdMyQUvlLiY9IUt5Zn8FyU3GMm1rjGE6VlLKaIOiXJEuTVklugPq8xVmS6Twn9OE-rQuWZ42MBe7rV8Dx3Kiii6U_7l588-voeE-ITb-Ri6rmfxIVTE60slj2_HWm6Cb915QU6hvfawgh5jb5zlU43TmwY20KMGxak18UOD9lfm8qflZe6sY2OgWtMlXIHJFA6Db0BRzHiH5ovP1PUG3vuwIw"><img src="https://mermaid.ink/img/pako:eNqVkcFuwjAMhl8l8pnwALlVwCQO06rBMZfQuBCtTabEOVQN746rFa3bBNJ8sv98jn_ZIzTBIijAuHXmHE2vveDYW_TkaBClrNdhFFW9lwdMyQUvlLiY9IUt5Zn8FyU3GMm1rjGE6VlLKaIOiXJEuTVklugPq8xVmS6Twn9OE-rQuWZ42MBe7rV8Dx3Kiii6U_7l588-voeE-ITb-Ri6rmfxIVTE60slj2_HWm6Cb915QU6hvfawgh5jb5zlU43TmwY20KMGxak18UOD9lfm8qflZe6sY2OgWtMlXIHJFA6Db0BRzHiH5ovP1PUG3vuwIw" alt=""></a></p>
<pre><code class="lang-mermaid">erDiagram
    Identity ||..o{ API-Session : has
    API-Session ||..o{ Session : has
    API-Session ||..o{ Session-Certificates : has
    API-Session ||..|| Posture-Data : has
    Identity ||..|| Authentication-Policy : has
    Identity ||..o{ Identity-Role-Attributes : has
    Identity ||..o{ Authenticator: has
    Identity ||..o{ Enrollment: has
    Identity ||..o| MFA-TOTP-Config: has


erDiagram
    Identity ||..o{ API-Session : has
    API-Session ||..o{ Session : has
    API-Session ||..o{ Session-Certificates : has
    API-Session ||..|| Posture-Data : has
    Identity ||..|| Authentication-Policy : has
    Identity ||..o{ Identity-Role-Attributes : has
    Identity ||..o{ Authenticator: has
    Identity ||..o{ Enrollment: has
    Identity ||..o| MFA-TOTP-Config: has
</code></pre><h2 id="creating">Creating</h2>
<p>Creating an identity alone may not be enough to make it usable. An identity will also need a valid primary
authentication mechanism. Depending on that mechanism it may also need to complete <a href="../enrollment/enrollment.html#clients">enrollment</a>.</p>
<p>Please note that all authentication mechanisms also require a properly configured <a href="authentication.html">authentication policy</a></p>
<p>The following <a href="authentication.html#primary-authentication">primary authentication</a> mechanisms require post-creation enrollment:</p>
<ul>
<li>Ziti PKI x509 Client Certificate</li>
<li>3rd Party x509 Client Certificate</li>
<li>Username Password (UPDB)</li>
</ul>
<p>The following do not require enrollment, but must have a properly configured <a href="external-jwt-signers.html">External JWT Signer</a></p>
<ul>
<li>JWT</li>
</ul>
<h3 id="creating-w-no-authenticatorsenrollments">Creating w/ No Authenticators/Enrollments</h3>
<p>Note: This identity will not be able to authenticate</p>
<h4 id="ziti-cli">Ziti CLI:</h4>
<p>It is currently not possible to create and identity without an enrollment option through the CLI. It can be completed
by creating and identity then deleting the default certificate enrollment.</p>
<pre><code>ziti edge create identity [device|service|user] &lt;name&gt;
ziti edge delete enrollment where &quot;identity=&lt;id&gt;&quot;
</code></pre><h4 id="edge-management-api">Edge Management API</h4>
<p><code>POST /edge/management/v1/identities</code></p>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Roger Wilco&quot;,
  &quot;isAdmin&quot;: false
}
</code></pre><h3 id="creating-w-ziti-pki-client-cert-enrollment">Creating w/ Ziti PKI Client Cert Enrollment</h3>
<p>Note: This identity will be using the default <a href="authentication.html">authentication policy</a> which allows certificate authentication</p>
<h4 id="ziti-cli-1">Ziti CLI:</h4>
<p><code>ziti edge create identity [device|service|user] &lt;name&gt;</code></p>
<h4 id="edge-management-api-1">Edge Management API</h4>
<p><code>POST /edge/management/v1/identities</code></p>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Roger Wilco&quot;,
  &quot;isAdmin&quot;: false,
  &quot;enrollment&quot;: {
    &quot;ott&quot;: true
  }
}
</code></pre><h3 id="creating-w-3rd-party-ca-client-cert-enrollment">Creating w/ 3rd Party CA Client Cert Enrollment</h3>
<p>Note: This identity will be using the default <a href="authentication.html">authentication policy</a> which allows certificate authentication</p>
<h4 id="ziti-cli-2">Ziti CLI:</h4>
<p>It is currently not possible to create identities with a 3rd party certificate enrollment through the CLI.</p>
<h4 id="edge-management-api-2">Edge Management API</h4>
<p><code>POST /edge/management/v1/identities</code></p>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Roger Wilco&quot;,
  &quot;isAdmin&quot;: false,
  &quot;enrollment&quot;: {
    &quot;ottca&quot;: &quot;&lt;id-to-3rd-party-ca&gt;&quot;
  }
}
</code></pre><h3 id="creating-w-usernamepassword-enrollment">Creating w/ Username/Password Enrollment</h3>
<p>Note: This identity will be using the default <a href="authentication.html">authentication policy</a> which allows UPDB authentication</p>
<h4 id="ziti-cli-3">Ziti CLI:</h4>
<p><code>ziti edge create identity [device|service|user] &lt;name&gt; --updb &lt;username&gt;</code></p>
<h4 id="edge-management-api-3">Edge Management API</h4>
<p><code>POST /edge/management/v1/identities</code></p>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Roger Wilco&quot;,
  &quot;isAdmin&quot;: false,
  &quot;enrollment&quot;: {
    &quot;updb&quot;: &quot;&lt;username&gt;&quot;
  }
}
</code></pre><h3 id="creating-w-jwt-authenticator">Creating w/ JWT Authenticator</h3>
<p>Note: A valid <a href="external-jwt-signers.html">External JWT Signer</a> must be created and an <a href="authentication.html">authentication policy</a>
must be defined that allows the identity to authenticate with that signer.</p>
<h4 id="ziti-cli-4">Ziti CLI:</h4>
<p><code>ziti edge create identity [device|service|user] &lt;name&gt; --external-id &quot;externalJWTId&quot;</code></p>
<h4 id="edge-management-api-4">Edge Management API</h4>
<p><code>POST /edge/management/v1/identities</code></p>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Roger Wilco&quot;,
  &quot;isAdmin&quot;: false,
  &quot;externalId&quot;: &quot;externalJWTId&quot;
}
</code></pre><h2 id="deleting">Deleting</h2>
<p>Deleting an Identity removes all directly associated data. This includes:</p>
<ul>
<li><a href="../sessions.html#api-session">API Sessions</a><ul>
<li><a href="../sessions.html#session">Sessions</a></li>
<li><a href="../authorization/posture-checks.html#posture-data">Posture Data</a></li>
<li><a href="api-session-certificates.html">Session Certificates</a></li>
</ul>
</li>
<li>Identity <a href="">Role Attributes</a></li>
<li><a href="authentication.html#authenticators">Authenticators</a></li>
<li><a href="../enrollment/enrollment.html">Enrollments</a></li>
<li><a href="totp.html">MFA TOTP Configuration</a></li>
</ul>
<p>It does not remove entities are that re-usable between Identities:</p>
<ul>
<li><a href="authentication-policies.html">Authentication Policies</a></li>
<li><a href="../authorization/policies/overview.html">Service Policies</a></li>
<li><a href="../authorization/policies/overview.html">Edge Router Policies</a></li>
</ul>
<p>Deleting an Identity immediately removes it and all current and future access it would have to a Ziti Network and its
Services.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/openziti/ziti-doc/blob/master/docfx_project/ziti/security/authentication/identities.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span class='pull-left'><span><a href='https://netfoundry.io'>©NetFoundry Inc.</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/privacy-policy'>Privacy Policy</a></span>&nbsp;&nbsp;<span><a href='https://www.netfoundry.io/legal-items'>Legal</a></span>&nbsp;&nbsp;<span><a href='https://netfoundry.zendesk.com/hc/en-us'>Support</a></span>&nbsp;&nbsp;</span><span class='pull-right'><span><a href='https://www.facebook.com/NetFoundry/' target='_blank'><img height='25' src='/images/fb.svg'></a></span>&nbsp;<span><a href='https://twitter.com/openziti' target='_blank'><img height='25' src='/images/twit.svg'></a></span>&nbsp;<span><a href='https://www.linkedin.com/company/netfoundry/' target='_blank'><img height='25' src='/images/li.svg'></a></span>&nbsp;<span><a href='https://www.youtube.com/channel/UCAsrfQasdZmp2Gq07Ej_5cQ' target='_blank'><img height='25' src='/images/yt.svg'></a></span>&nbsp;&nbsp;&nbsp;</span><br>
<!-- Place this tag in your head or just before your close body tag. -->
<script async="" defer="" src="https://buttons.github.io/buttons.js"></script>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
