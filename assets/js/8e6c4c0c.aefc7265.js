"use strict";(self.webpackChunkopen_ziti=self.webpackChunkopen_ziti||[]).push([[3055],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,g=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return n?r.createElement(g,a(a({ref:t},c),{},{components:n})):r.createElement(g,a({ref:t},c))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,a[1]=s;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},67475:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var r=n(87462),o=(n(67294),n(3905));const i={},a="Troubleshooting",s={unversionedId:"core-concepts/clients/tunnelers/linux/linux-tunnel-troubleshooting",id:"core-concepts/clients/tunnelers/linux/linux-tunnel-troubleshooting",title:"Troubleshooting",description:"More Logging",source:"@site/docs/core-concepts/clients/tunnelers/linux/linux-tunnel-troubleshooting.md",sourceDirName:"core-concepts/clients/tunnelers/linux",slug:"/core-concepts/clients/tunnelers/linux/linux-tunnel-troubleshooting",permalink:"/docs/core-concepts/clients/tunnelers/linux/linux-tunnel-troubleshooting",draft:!1,editUrl:"https://github.com/openziti/ziti-doc/tree/main/docusaurus/docs/core-concepts/clients/tunnelers/linux/linux-tunnel-troubleshooting.md",tags:[],version:"current",frontMatter:{},sidebar:"rootSidebar",previous:{title:"Options and Modes",permalink:"/docs/core-concepts/clients/tunnelers/linux/linux-tunnel-options"},next:{title:"Endpoint  Initialization",permalink:"/docs/core-concepts/clients/process-sequences/EndpointInitialization"}},l={},u=[{value:"More Logging",id:"more-logging",level:2},{value:"Systemd service won&#39;t start or keeps restarting",id:"systemd-service-wont-start-or-keeps-restarting",level:2},{value:"Intercepting or hosting not working",id:"intercepting-or-hosting-not-working",level:2},{value:"Process keeps crashing",id:"process-keeps-crashing",level:2}],c={toc:u};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("h2",{id:"more-logging"},"More Logging"),(0,o.kt)("p",null,"The simplest step you can take toward a diagnosis is to reduce the minimum message log level. This usually means lower-level DEBUG messages and above are emitted in addition to the default level of INFO level and above e.g. WARN, ERROR, etc."),(0,o.kt)("p",null,"  For ",(0,o.kt)("inlineCode",{parentName:"p"},"ziti-edge-tunnel"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"DEBUG")," log level is ",(0,o.kt)("inlineCode",{parentName:"p"},"--verbose 4"),"."),(0,o.kt)("h2",{id:"systemd-service-wont-start-or-keeps-restarting"},"Systemd service won't start or keeps restarting"),(0,o.kt)("p",null,"If you change your package repo subscription or install the same DEB or RPM package from another source, excluding normal upgrades and downgrades, then it may be necessary to reload the systemd service unit definitions:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl daemon-reload\n")),(0,o.kt)("p",null,"You may read the logs in the systemd journal."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"journalctl -xeu ziti-edge-tunnel.service\n")),(0,o.kt)("h2",{id:"intercepting-or-hosting-not-working"},"Intercepting or hosting not working"),(0,o.kt)("p",null,"You may inspect the loaded identity and router info for a running ",(0,o.kt)("inlineCode",{parentName:"p"},"ziti-edge-tunnel")," by dumping it to stdout or the systemd journal with an IPC command, or you may signal to dump the identities' info to a file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# dump identities info to std our journal if systemd unit with IPC command\n./ziti-edge-tunnel dump\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# dump identities info to a file and inspect\nsudo pkill -USR1 -f ziti-edge-tunnel\nless /tmp/ziti-dump.964315.dump\n")),(0,o.kt)("h2",{id:"process-keeps-crashing"},"Process keeps crashing"),(0,o.kt)("p",null,"If the tunneller is crashing then it may be crucial to collect and analyze the core dump file. You may need to enable saving core dumps depending upon your OS configuration."),(0,o.kt)("p",null,"  You can see how dump files are handled by inspecting this file, which is from Ubuntu 20.10."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ cat /proc/sys/kernel/core_pattern\n|/usr/share/apport/apport %p %s %c %d %P %E\n")),(0,o.kt)("p",null,"  In this case the dump is handled by ",(0,o.kt)("inlineCode",{parentName:"p"},"apport")," which saves the file in ",(0,o.kt)("inlineCode",{parentName:"p"},"/var/crash"),". I'll need to follow the ",(0,o.kt)("inlineCode",{parentName:"p"},"apport")," documentation to learn how to unpack and parse the dump file."),(0,o.kt)("p",null,"Please raise ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/openziti/ziti-tunnel-sdk-c/issues/"},"a GitHub issue")," if you experience a crash."))}p.isMDXComponent=!0}}]);